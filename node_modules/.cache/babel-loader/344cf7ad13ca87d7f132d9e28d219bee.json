{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./css/App.css';import eruda from'eruda';import{Panel,PanelHeader,View,ScreenSpinner,List,Cell,Gallery,FormLayout,Input,Avatar,Group,Epic,Tabbar,TabbarItem,Separator,Button,PanelHeaderContext,Header,PanelHeaderSimple,PanelHeaderContent,Placeholder,Tabs,TabsItem,PullToRefresh,Snackbar,Textarea,PanelHeaderBack,PanelHeaderClose,CellButton,Alert,Link}from'@vkontakte/vkui';var blueBackground={backgroundColor:'var(--accent)'},redBackground={backgroundColor:'var(--dynamic_red)'};var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.back=function(){if(_this.state.popout!==null){_this.setState({popout:null});return;}var _this$state=_this.state,activePanel=_this$state.activePanel,history=_this$state.history;if(activePanel==='main'){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else{if(history.length===1){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else if(history.length>1){history.pop();activePanel=history[history.length-1];_this.setState({activePanel:activePanel});_this.change_hash(activePanel);}}};_this.state={popout:null,history:[\"main\"],activePanel:\"main\"};_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.initializeApp=_this.initializeApp.bind(_assertThisInitialized(_this));_this.back=_this.back.bind(_assertThisInitialized(_this));_this.go=_this.go.bind(_assertThisInitialized(_this));_this.change_hash=_this.change_hash.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.addEventListener('popstate',function(e){e.preventDefault();_this2.back(e);});bridge.subscribe(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$detail,type,data,schemeAttribute;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type!==undefined)console.log(type,data);if(type==='VKWebAppUpdateConfig'){schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);}case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());this.initializeApp();}},{key:\"initializeApp\",value:function initializeApp(){var hash=window.location.hash;if(hash){hash=hash.replace('#','');this.go(hash);}else{this.change_hash('main');}}},{key:\"go\",value:function go(panel){var history=this.state.history;if(history[history.length-1]!==panel){history.push(panel);window.history.pushState({activePanel:panel},'Title');this.setState({activePanel:panel,history:history,snackbar:null});}this.change_hash(panel);}},{key:\"change_hash\",value:function change_hash(panel){bridge.send(\"VKWebAppSetLocation\",{\"location\":panel});}},{key:\"showSnackBar\",value:function(){var _showSnackBar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(text,icon,style,action,onActionClick){var _this3=this;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.setState({snackbar:null});_context2.next=3;return this.sleep(150);case 3:if(onActionClick===null)onActionClick=function onActionClick(){};this.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this3.setState({snackbar:null});},before:React.createElement(Avatar,{size:24,style:style},icon),action:action,onActionClick:onActionClick},text)});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function showSnackBar(_x2,_x3,_x4,_x5,_x6){return _showSnackBar.apply(this,arguments);}return showSnackBar;}()},{key:\"sleep\",value:function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}},{key:\"render\",value:function render(){return React.createElement(View,{activePanel:this.state.activePanel,popout:this.state.popout,history:this.state.history,onSwipeBack:this.back},React.createElement(Panel,{id:\"main\"},React.createElement(PanelHeader,null,\"Mini App\")));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/TestMiniApp/src/App.js"],"names":["React","bridge","eruda","Panel","PanelHeader","View","ScreenSpinner","List","Cell","Gallery","FormLayout","Input","Avatar","Group","Epic","Tabbar","TabbarItem","Separator","Button","PanelHeaderContext","Header","PanelHeaderSimple","PanelHeaderContent","Placeholder","Tabs","TabsItem","PullToRefresh","Snackbar","Textarea","PanelHeaderBack","PanelHeaderClose","CellButton","Alert","Link","blueBackground","backgroundColor","redBackground","App","props","back","state","popout","setState","activePanel","history","send","length","pop","change_hash","componentDidMount","bind","initializeApp","go","window","addEventListener","e","preventDefault","subscribe","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","hash","location","replace","panel","push","pushState","snackbar","text","icon","style","action","onActionClick","sleep","ms","Promise","resolve","setTimeout","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css'\nimport eruda from 'eruda';\n\nimport { Panel, PanelHeader, View , ScreenSpinner, List , Cell , Gallery , FormLayout , Input , Avatar , Group , Epic, Tabbar, TabbarItem, Separator, Button, PanelHeaderContext, Header, PanelHeaderSimple, PanelHeaderContent, Placeholder, Tabs,\n\tTabsItem, PullToRefresh, Snackbar, Textarea, PanelHeaderBack, PanelHeaderClose, CellButton, Alert, Link  } from '@vkontakte/vkui';\n\nconst blueBackground = {\n\tbackgroundColor: 'var(--accent)'\n}, redBackground = {\n\tbackgroundColor: 'var(--dynamic_red)'\n};\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpopout: null,\n\t\t\thistory: [\"main\"],\n\t\t\tactivePanel: \"main\"\n\t\t};\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.back = this.back.bind(this);\n\t\tthis.go = this.go.bind(this);\n\t\tthis.change_hash = this.change_hash.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.back(e);\n\t\t});\n\n\t\tbridge.subscribe(async ({ detail: { type, data }}) => {\n\t\t\tif(type !== undefined) console.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tthis.initializeApp();\n\t}\n\n\tinitializeApp() {\n\t\tlet hash = window.location.hash;\n\t\tif (hash) {\n\t\t\thash = hash.replace('#','');\n\t\t\tthis.go(hash);\n\t\t}else{\n\t\t\tthis.change_hash('main');\n\t\t}\n\t}\n\n\tback = () => {\n\t\tif(this.state.popout !== null){\n\t\t\tthis.setState({ popout: null });\n\t\t\treturn ;\n\t\t}\n\t\tlet { activePanel, history } = this.state;\n\t\tif(activePanel === 'main'){\n\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t}else {\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tactivePanel = history[history.length - 1];\n\t\t\t\tthis.setState({activePanel});\n\t\t\t\tthis.change_hash(activePanel);\n\t\t\t}\n\t\t}\n\t};\n\tgo(panel) {\n\t\tlet history = this.state.history;\n\t\tif(history[history.length-1] !== panel) {\n\t\t\thistory.push(panel);\n\t\t\twindow.history.pushState({activePanel: panel}, 'Title');\n\t\t\tthis.setState({activePanel: panel, history, snackbar: null});\n\t\t}\n\t\tthis.change_hash(panel);\n\t}\n\tchange_hash (panel){\n\t\tbridge.send(\"VKWebAppSetLocation\", {\"location\": panel});\n\t}\n\n\tasync showSnackBar (text, icon, style, action, onActionClick){\n\t\tthis.setState({ snackbar: null });\n\t\tawait this.sleep(150);\n\t\tif(onActionClick === null) onActionClick = ()=> {};\n\t\tthis.setState({ snackbar:\n\t\t\t\t<Snackbar\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\n\t\t\t\t\tbefore={<Avatar size={24} style={style}>{icon}</Avatar>}\n\t\t\t\t\taction={action}\n\t\t\t\t\tonActionClick={onActionClick}\n\t\t\t\t>\n\t\t\t\t\t{text}\n\t\t\t\t</Snackbar>\n\t\t});\n\t}\n\tsleep(ms) {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout} history={this.state.history} onSwipeBack={this.back}>\n\t\t\t\t<Panel id=\"main\">\n\t\t\t\t\t<PanelHeader>Mini App</PanelHeader>\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}