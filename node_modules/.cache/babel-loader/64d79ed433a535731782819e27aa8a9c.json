{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\src\\\\Tracker.js\";\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport eruda from 'eruda';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/Tracker.css';\nimport { Panel, PanelHeader, View, Epic, Tabbar, TabbarItem, Tabs, TabsItem, PanelHeaderButton } from '@vkontakte/vkui';\nimport Icon28Truck from './icons/Icon28Truck.js';\nimport Icon28Clock from './icons/Icon28Clock.js';\nimport MainPlaceholderIcon from \"./icons/MainPlaceholderIcon.svg\";\nimport MainPlaceholderButton from \"./icons/MainPlaceholderButton.svg\";\nimport MainPlaceholderButtonLoading from \"./icons/MainPlaceholderButtonLoading.svg\";\nimport { Placeholder } from \"./components/Placeholder\";\nimport Card from \"./components/Card\";\nimport Footer from \"@vkontakte/vkui/dist/components/Footer/Footer\";\nimport ViewTabs from \"./components/ViewTabs\";\nimport TrackHistory from \"./components/TrackHistory\";\n\nclass Tracker extends React.Component {\n  constructor(props) {\n    super(props); //eruda.init();\n\n    this.back = () => {\n      if (this.state.popout !== null) {\n        this.setState({\n          popout: null\n        });\n        window.history.pushState({\n          pop: 'popout'\n        }, 'Title');\n        return;\n      }\n\n      let _this$state = this.state,\n          activePanel = _this$state.activePanel,\n          activeStory = _this$state.activeStory,\n          history = _this$state.history;\n      let history_ = history[activeStory];\n\n      if (history_.length === 1) {\n        bridge.send('VKWebAppClose', {\n          status: 'success'\n        });\n      } else if (history_.length > 1) {\n        history_.pop();\n        activePanel[activeStory] = history_[history_.length - 1];\n        this.setState({\n          activePanel,\n          history\n        });\n      }\n    };\n\n    this.state = {\n      popout: null,\n      history: {\n        add: ['add'],\n        history: ['history']\n      },\n      activePanel: {\n        add: 'add',\n        history: 'history'\n      },\n      activeStory: 'add',\n      activeTabHistory: 'all'\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.back = this.back.bind(this);\n    this.go = this.go.bind(this);\n    this.onStoryChange = this.onStoryChange.bind(this);\n  }\n\n  async componentDidMount() {\n    bridge.send('VKWebAppInit');\n    window.addEventListener('popstate', e => {\n      e.preventDefault();\n      this.back(e);\n    });\n    bridge.subscribe(async ({\n      detail: {\n        type,\n        data\n      }\n    }) => {\n      if (type !== undefined) console.log(type, data);\n\n      if (type === 'VKWebAppUpdateConfig') {\n        const schemeAttribute = document.createAttribute('scheme');\n        schemeAttribute.value = data.scheme ? data.scheme : 'bright_light';\n        document.body.attributes.setNamedItem(schemeAttribute);\n      }\n    });\n  }\n\n  go(panel) {\n    let _this$state2 = this.state,\n        activeStory = _this$state2.activeStory,\n        history = _this$state2.history,\n        activePanel = _this$state2.activePanel;\n    let history_ = history[activeStory];\n\n    if (history_[history_.length - 1] !== panel) {\n      history_.push(panel);\n      window.history.pushState({\n        activePanel: panel\n      }, 'Title');\n      activePanel[activeStory] = panel;\n      this.setState({\n        activePanel,\n        history\n      });\n    }\n  }\n\n  onStoryChange(e) {\n    let story = e.currentTarget.dataset.story;\n    if (this.state.activeStory === story && this.state.history[story].length > 1) this.back();\n    this.setState({\n      activeStory: story\n    });\n  }\n\n  sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  render() {\n    return React.createElement(Epic, {\n      activeStory: this.state.activeStory,\n      tabbar: React.createElement(Tabbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(TabbarItem, {\n        onClick: this.onStoryChange,\n        selected: this.state.activeStory === 'add',\n        \"data-story\": \"add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Icon28Truck, {\n        active: this.state.activeStory === 'add',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })), React.createElement(TabbarItem, {\n        onClick: this.onStoryChange,\n        selected: this.state.activeStory === 'history',\n        \"data-story\": \"history\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Icon28Clock, {\n        active: this.state.activeStory === 'history',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(View, {\n      id: \"add\",\n      activePanel: this.state.activePanel.add,\n      popout: this.state.popout,\n      history: this.state.history.add,\n      onSwipeBack: this.back,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(Panel, {\n      id: \"add\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(PanelHeader, {\n      separator: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"\\u041E\\u0442\\u0441\\u043B\\u0435\\u0436\\u0438\\u0432\\u0430\\u043D\\u0438\\u0435\"), React.createElement(Placeholder, {\n      title: \"\\u041E\\u0442\\u0441\\u043B\\u0435\\u0436\\u0438\\u0432\\u0430\\u0439\\u0442\\u0435 \\u043F\\u043E\\u0441\\u044B\\u043B\\u043A\\u0438\",\n      description: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0442\\u0440\\u0435\\u043A-\\u043A\\u043E\\u0434 \\u0441\\u0432\\u043E\\u0435\\u0439 \\u043F\\u043E\\u0441\\u044B\\u043B\\u043A\\u0438!\",\n      topIcon: MainPlaceholderIcon,\n      btnIcon: MainPlaceholderButton,\n      btnIconLoading: MainPlaceholderButtonLoading,\n      btnOnClick: async () => {\n        await this.sleep(3000);\n      },\n      inputPlaceholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0442\\u0440\\u0435\\u043A-\\u043A\\u043E\\u0434\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }))), React.createElement(View, {\n      id: \"history\",\n      activePanel: this.state.activePanel.history,\n      popout: this.state.popout,\n      history: this.state.history.history,\n      onSwipeBack: this.back,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Panel, {\n      id: \"history\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(PanelHeader, {\n      separator: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\"), React.createElement(Tabs, {\n      mode: \"buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(TabsItem, {\n      onClick: () => this.setState({\n        activeTabHistory: 'all'\n      }),\n      selected: this.state.activeTabHistory === 'all',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"\\u0412\\u0441\\u0435\"), React.createElement(TabsItem, {\n      onClick: () => this.setState({\n        activeTabHistory: 'transit'\n      }),\n      selected: this.state.activeTabHistory === 'transit',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"\\u0412 \\u043F\\u0443\\u0442\\u0438\"), React.createElement(TabsItem, {\n      onClick: () => this.setState({\n        activeTabHistory: 'delivered'\n      }),\n      selected: this.state.activeTabHistory === 'delivered',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u043E\")), React.createElement(ViewTabs, {\n      activeTab: this.state.activeTabHistory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"all\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Card, {\n      onClick: () => {\n        this.go('tracking');\n      },\n      title: \"RF727913178SG\",\n      description: \"\\u0412 \\u043F\\u0443\\u0442\\u0438\",\n      expandable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(Card, {\n      onClick: () => {\n        this.go('tracking');\n      },\n      title: \"RF727913178SG\",\n      description: \"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u043E\",\n      expandable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"2 \\u043F\\u043E\\u0441\\u044B\\u043B\\u043A\\u0438\")), React.createElement(\"div\", {\n      id: \"transit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(Card, {\n      onClick: () => {\n        this.go('tracking');\n      },\n      title: \"RF727913178SG\",\n      description: \"\\u0412 \\u043F\\u0443\\u0442\\u0438\",\n      expandable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"1 \\u043F\\u043E\\u0441\\u044B\\u043B\\u043A\\u0430\")), React.createElement(\"div\", {\n      id: \"delivered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Card, {\n      onClick: () => {\n        this.go('tracking');\n      },\n      title: \"RF727913178SG\",\n      description: \"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u043E\",\n      expandable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"1 \\u043F\\u043E\\u0441\\u044B\\u043B\\u043A\\u0430\")))), React.createElement(Panel, {\n      id: \"tracking\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(PanelHeader, {\n      separator: false,\n      left: React.createElement(PanelHeaderButton, {\n        onClick: this.back,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Icon16Chevron, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u0441\\u044B\\u043B\\u043A\\u0430\"), React.createElement(TrackHistory, {\n      history: [{\n        status: 0,\n        date: '5 марта',\n        country: 'CN'\n      }, {\n        status: 1,\n        date: '6-11 марта',\n        country: 'CN'\n      }, {\n        status: 3,\n        date: '11-13 марта',\n        country: 'CN'\n      }, {\n        status: 4,\n        date: '13 марта',\n        country: 'RU'\n      }],\n      updated: 'Вчера',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Tracker;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/TestMiniApp/src/Tracker.js"],"names":["React","bridge","eruda","Panel","PanelHeader","View","Epic","Tabbar","TabbarItem","Tabs","TabsItem","PanelHeaderButton","Icon28Truck","Icon28Clock","Placeholder","Card","Footer","ViewTabs","TrackHistory","Tracker","Component","constructor","props","back","state","popout","setState","window","history","pushState","pop","activePanel","activeStory","history_","length","send","status","add","activeTabHistory","componentDidMount","bind","go","onStoryChange","addEventListener","e","preventDefault","subscribe","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","panel","push","story","currentTarget","dataset","sleep","ms","Promise","resolve","setTimeout","render","MainPlaceholderIcon","MainPlaceholderButton","MainPlaceholderButtonLoading","date","country"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport eruda from 'eruda';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './css/Tracker.css';\r\n\r\nimport { Panel, PanelHeader, View, Epic, Tabbar, TabbarItem, Tabs, TabsItem, PanelHeaderButton } from '@vkontakte/vkui';\r\n\r\nimport Icon28Truck from './icons/Icon28Truck.js';\r\nimport Icon28Clock from './icons/Icon28Clock.js';\r\nimport MainPlaceholderIcon from './icons/MainPlaceholderIcon.svg';\r\nimport MainPlaceholderButton from './icons/MainPlaceholderButton.svg';\r\nimport MainPlaceholderButtonLoading from './icons/MainPlaceholderButtonLoading.svg';\r\nimport {Placeholder} from \"./components/Placeholder\";\r\nimport Card from \"./components/Card\";\r\nimport Footer from \"@vkontakte/vkui/dist/components/Footer/Footer\";\r\nimport ViewTabs from \"./components/ViewTabs\";\r\nimport TrackHistory from \"./components/TrackHistory\";\r\n\r\nclass Tracker extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        //eruda.init();\r\n\r\n        this.state = {\r\n            popout: null,\r\n            history: {\r\n                add: [ 'add' ],\r\n                history: [ 'history' ]\r\n            },\r\n            activePanel: {\r\n                add: 'add',\r\n                history: 'history'\r\n            },\r\n            activeStory: 'add',\r\n            activeTabHistory: 'all'\r\n        };\r\n\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.back = this.back.bind(this);\r\n        this.go = this.go.bind(this);\r\n        this.onStoryChange = this.onStoryChange.bind(this);\r\n    }\r\n\r\n    async componentDidMount () {\r\n        bridge.send('VKWebAppInit');\r\n\r\n        window.addEventListener('popstate', e => {\r\n            e.preventDefault();\r\n            this.back(e);\r\n        });\r\n\r\n        bridge.subscribe(async ({ detail: { type, data }}) => {\r\n            if (type !== undefined) console.log(type, data);\r\n            if (type === 'VKWebAppUpdateConfig') {\r\n                const schemeAttribute = document.createAttribute('scheme');\r\n                schemeAttribute.value = data.scheme ? data.scheme : 'bright_light';\r\n                document.body.attributes.setNamedItem(schemeAttribute);\r\n            }\r\n        });\r\n    }\r\n\r\n    back = () => {\r\n        if(this.state.popout !== null){\r\n            this.setState({ popout: null });\r\n            window.history.pushState({ pop: 'popout' }, 'Title');\r\n            return ;\r\n        }\r\n        let { activePanel, activeStory, history } = this.state;\r\n        let history_ = history[activeStory];\r\n        if(history_.length === 1) {\r\n            bridge.send('VKWebAppClose', { status: 'success' });\r\n        } else if (history_.length > 1) {\r\n            history_.pop();\r\n            activePanel[activeStory] = history_[history_.length - 1];\r\n            this.setState({ activePanel, history });\r\n        }\r\n    };\r\n    go(panel) {\r\n        let { activeStory, history, activePanel } = this.state;\r\n        let history_ = history[activeStory];\r\n        if(history_[history_.length-1] !== panel) {\r\n            history_.push(panel);\r\n            window.history.pushState({ activePanel: panel }, 'Title');\r\n            activePanel[activeStory] = panel;\r\n            this.setState({ activePanel, history });\r\n        }\r\n    }\r\n\r\n    onStoryChange (e) {\r\n        let story = e.currentTarget.dataset.story;\r\n\r\n        if(\r\n            this.state.activeStory === story && this.state.history[story].length > 1\r\n        )\r\n                this.back();\r\n\r\n        this.setState({ activeStory: story });\r\n    }\r\n\r\n    sleep(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Epic activeStory={this.state.activeStory} tabbar={\r\n                <Tabbar>\r\n                    <TabbarItem\r\n                        onClick={this.onStoryChange}\r\n                        selected={this.state.activeStory === 'add'}\r\n                        data-story='add'\r\n                    ><Icon28Truck active={this.state.activeStory === 'add'}/></TabbarItem>\r\n                    <TabbarItem\r\n                        onClick={this.onStoryChange}\r\n                        selected={this.state.activeStory === 'history'}\r\n                        data-story='history'\r\n                    ><Icon28Clock active={this.state.activeStory === 'history'}/></TabbarItem>\r\n                </Tabbar>\r\n            }>\r\n                <View id='add' activePanel={this.state.activePanel.add} popout={this.state.popout} history={this.state.history.add} onSwipeBack={this.back}>\r\n                    <Panel id='add'>\r\n                        <PanelHeader separator={false}>Отслеживание</PanelHeader>\r\n                        <Placeholder\r\n                            title='Отслеживайте посылки'\r\n                            description='Введите трек-код своей посылки!'\r\n                            topIcon={MainPlaceholderIcon}\r\n                            btnIcon={MainPlaceholderButton}\r\n                            btnIconLoading={MainPlaceholderButtonLoading}\r\n                            btnOnClick={async ()=>{\r\n                                await this.sleep(3000);\r\n                            }}\r\n                            inputPlaceholder='Введите трек-код'\r\n                        />\r\n                    </Panel>\r\n                </View>\r\n                <View id='history' activePanel={this.state.activePanel.history} popout={this.state.popout} history={this.state.history.history} onSwipeBack={this.back}>\r\n                    <Panel id='history'>\r\n                        <PanelHeader separator={false}>История</PanelHeader>\r\n                        <Tabs mode='buttons'>\r\n                            <TabsItem\r\n                                onClick={() => this.setState({ activeTabHistory: 'all' })}\r\n                                selected={this.state.activeTabHistory === 'all'}\r\n                            >\r\n                                Все\r\n                            </TabsItem>\r\n                            <TabsItem\r\n                                onClick={() => this.setState({ activeTabHistory: 'transit' })}\r\n                                selected={this.state.activeTabHistory === 'transit'}\r\n                            >\r\n                                В пути\r\n                            </TabsItem>\r\n                            <TabsItem\r\n                                onClick={() => this.setState({ activeTabHistory: 'delivered' })}\r\n                                selected={this.state.activeTabHistory === 'delivered'}\r\n                            >\r\n                                Доставлено\r\n                            </TabsItem>\r\n                        </Tabs>\r\n                        <ViewTabs activeTab={this.state.activeTabHistory}>\r\n                            <div id='all'>\r\n                                <Card onClick={()=>{ this.go('tracking') }}\r\n                                      title='RF727913178SG' description='В пути' expandable/>\r\n                                <Card onClick={()=>{ this.go('tracking') }}\r\n                                      title='RF727913178SG' description='Доставлено' expandable/>\r\n                                <Footer>2 посылки</Footer>\r\n                            </div>\r\n                            <div id='transit'>\r\n                                <Card onClick={()=>{ this.go('tracking') }}\r\n                                      title='RF727913178SG' description='В пути' expandable/>\r\n                                <Footer>1 посылка</Footer>\r\n                            </div>\r\n                            <div id='delivered'>\r\n                                <Card onClick={()=>{ this.go('tracking') }}\r\n                                      title='RF727913178SG' description='Доставлено' expandable/>\r\n                                <Footer>1 посылка</Footer>\r\n                            </div>\r\n                        </ViewTabs>\r\n                    </Panel>\r\n                    <Panel id='tracking'>\r\n                        <PanelHeader separator={false} left={<PanelHeaderButton onClick={this.back} ><Icon16Chevron/></PanelHeaderButton>}>Посылка</PanelHeader>\r\n                        <TrackHistory\r\n                            history={[\r\n                                {\r\n                                    status: 0,\r\n                                    date: '5 марта',\r\n                                    country: 'CN'\r\n                                }, {\r\n                                    status: 1,\r\n                                    date: '6-11 марта',\r\n                                    country: 'CN'\r\n                                }, {\r\n                                    status: 3,\r\n                                    date: '11-13 марта',\r\n                                    country: 'CN'\r\n                                }, {\r\n                                    status: 4,\r\n                                    date: '13 марта',\r\n                                    country: 'RU'\r\n                                }\r\n                            ]}\r\n                            updated={'Вчера'}\r\n                        />\r\n                    </Panel>\r\n                </View>\r\n            </Epic>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Tracker;"]},"metadata":{},"sourceType":"module"}