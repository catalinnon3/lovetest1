{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./css/App.css';import eruda from'eruda';import{Panel,PanelHeader,View,ScreenSpinner,List,Cell,Gallery,FormLayout,Input,Avatar,Group,Epic,Tabbar,TabbarItem,Separator,Button,PanelHeaderContext,Header,PanelHeaderSimple,PanelHeaderContent,Placeholder,Tabs,TabsItem,PullToRefresh,Snackbar,FixedLayout,PanelHeaderBack,PanelHeaderClose,CellButton,PromoBanner,Link,platform,IOS,ANDROID}from'@vkontakte/vkui';import Icon16CancelCircleOutline from'@vkontakte/icons/dist/16/cancel_circle_outline';import Icon16Dropdown from'@vkontakte/icons/dist/16/dropdown';import Icon28AdvertisingOutline from'@vkontakte/icons/dist/28/advertising_outline';var blueBackground={backgroundColor:'var(--accent)'},redBackground={backgroundColor:'var(--dynamic_red)'},os=platform();;var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.back=function(){if(_this.state.popout!==null){_this.setState({popout:null});return;}var _this$state=_this.state,activePanel=_this$state.activePanel,history=_this$state.history;if(activePanel==='main'){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else{if(history.length===1){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else if(history.length>1){history.pop();activePanel=history[history.length-1];_this.setState({activePanel:activePanel});_this.change_hash(activePanel);}}};_this.state={popout:null,history:[\"main\"],activePanel:\"main\",show_native_ads:false};_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.initializeApp=_this.initializeApp.bind(_assertThisInitialized(_this));_this.back=_this.back.bind(_assertThisInitialized(_this));_this.go=_this.go.bind(_assertThisInitialized(_this));_this.change_hash=_this.change_hash.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.addEventListener('popstate',function(e){e.preventDefault();_this2.back(e);});bridge.subscribe(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$detail,type,data,schemeAttribute;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type!==undefined)console.log(type,data);if(type==='VKWebAppUpdateConfig'){schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);eruda.init();}case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());this.initializeApp();}},{key:\"initializeApp\",value:function initializeApp(){var hash=window.location.hash;if(hash){hash=hash.replace('#','');this.go(hash);}else{this.change_hash('main');}}},{key:\"go\",value:function go(panel){var history=this.state.history;if(history[history.length-1]!==panel){history.push(panel);window.history.pushState({activePanel:panel},'Title');this.setState({activePanel:panel,history:history,snackbar:null});}this.change_hash(panel);}},{key:\"change_hash\",value:function change_hash(panel){bridge.send(\"VKWebAppSetLocation\",{\"location\":panel});}},{key:\"showSnackBar\",value:function(){var _showSnackBar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(text,icon,style,action,onActionClick){var _this3=this;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.setState({snackbar:null});_context2.next=3;return this.sleep(150);case 3:if(onActionClick===null)onActionClick=function onActionClick(){};this.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this3.setState({snackbar:null});},before:React.createElement(Avatar,{size:24,style:style},icon),action:action,onActionClick:onActionClick},text)});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function showSnackBar(_x2,_x3,_x4,_x5,_x6){return _showSnackBar.apply(this,arguments);}return showSnackBar;}()},{key:\"sleep\",value:function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}},{key:\"render\",value:function render(){var _this4=this;return React.createElement(View,{activePanel:this.state.activePanel,popout:this.state.popout,history:this.state.history,onSwipeBack:this.back},React.createElement(Panel,{id:\"main\"},React.createElement(PanelHeader,null,\"Mini App\"),React.createElement(Group,null,React.createElement(Cell,{expandable:true,before:React.createElement(Icon28AdvertisingOutline,null),onClick:function onClick(){_this4.go('advert');}},\"\\u0420\\u0435\\u043A\\u043B\\u0430\\u043C\\u0430\"))),React.createElement(Panel,{id:\"advert\"},React.createElement(PanelHeader,null,\"\\u0420\\u0435\\u043A\\u043B\\u0430\\u043C\\u0430\"),React.createElement(Group,null,React.createElement(Cell,{indicator:os===ANDROID?'Android':os===IOS?'IOS':'Web',expandable:true},\"\\u041F\\u043B\\u0430\\u0442\\u0444\\u043E\\u0440\\u043C\\u0430\")),React.createElement(Group,{header:React.createElement(Header,{mode:\"secondary\"},\"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u0440\\u0435\\u043A\\u043B\\u0430\\u043C\\u044B\")},React.createElement(Cell,{onClick:function onClick(){if(os===IOS){_this4.setState({show_banner_ads:!_this4.state.show_banner_ads});}else{_this4.showSnackBar('IOS only',React.createElement(Icon16CancelCircleOutline,null),redBackground);}},asideContent:React.createElement(Icon16Dropdown,{style:{transform:\"rotate(\".concat(this.state.show_banner_ads?'180deg':'0',\")\")}}),expandable:true},\"\\u0411\\u0430\\u043D\\u043D\\u0435\\u0440\"),this.state.show_banner_ads&&React.createElement(\"div\",null,React.createElement(Separator,null),React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-end',marginTop:'8px'}},React.createElement(Button,{mode:\"primary\",onClick:function onClick(){bridge.send('VKWebAppGetAds',{}).then(function(data){_this4.setState({promoBanner:React.createElement(PromoBanner,{onClose:function onClose(){_this4.setState({promoBanner:null});},bannerData:data})});});}},\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C\"),\" \",React.createElement(Button,{style:{marginLeft:'8px'},mode:\"secondary\",onClick:function onClick(){_this4.setState({promoBanner:null});}},\"\\u0421\\u043A\\u0440\\u044B\\u0442\\u044C\"))),React.createElement(Cell,{onClick:function onClick(){if(os===ANDROID){_this4.setState({show_native_ads:!_this4.state.show_native_ads});}else{_this4.showSnackBar('Android only',React.createElement(Icon16CancelCircleOutline,null),redBackground);}},asideContent:React.createElement(Icon16Dropdown,{style:{transform:\"rotate(\".concat(this.state.show_native_ads?'180deg':'0',\")\")}}),expandable:true},\"\\u041F\\u043E\\u043B\\u043D\\u043E\\u044D\\u043A\\u0440\\u0430\\u043D\\u043D\\u0430\\u044F\"),this.state.show_native_ads&&React.createElement(\"div\",null,React.createElement(Separator,null),React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-end',marginTop:'8px'}},React.createElement(Button,{mode:\"outline\",onClick:function onClick(){bridge.send('VKWebAppShowNativeAds',{ad_format:'preloader'});}},\"preloader\"),React.createElement(Button,{style:{marginLeft:'8px'},mode:\"outline\",onClick:function onClick(){bridge.send('VKWebAppShowNativeAds',{ad_format:'reward'});}},\"reward\"),React.createElement(Button,{style:{marginLeft:'8px'},mode:\"outline\",onClick:function onClick(){bridge.send('VKWebAppShowNativeAds',{ad_format:'interstitial'});}},\"interstitial\")))),this.state.promoBanner&&React.createElement(FixedLayout,{vertical:\"bottom\"},this.state.promoBanner),this.state.snackbar));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/TestMiniApp/src/App.js"],"names":["React","bridge","eruda","Panel","PanelHeader","View","ScreenSpinner","List","Cell","Gallery","FormLayout","Input","Avatar","Group","Epic","Tabbar","TabbarItem","Separator","Button","PanelHeaderContext","Header","PanelHeaderSimple","PanelHeaderContent","Placeholder","Tabs","TabsItem","PullToRefresh","Snackbar","FixedLayout","PanelHeaderBack","PanelHeaderClose","CellButton","PromoBanner","Link","platform","IOS","ANDROID","Icon16CancelCircleOutline","Icon16Dropdown","Icon28AdvertisingOutline","blueBackground","backgroundColor","redBackground","os","App","props","back","state","popout","setState","activePanel","history","send","length","pop","change_hash","show_native_ads","componentDidMount","bind","initializeApp","go","window","addEventListener","e","preventDefault","subscribe","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","init","hash","location","replace","panel","push","pushState","snackbar","text","icon","style","action","onActionClick","sleep","ms","Promise","resolve","setTimeout","show_banner_ads","showSnackBar","transform","display","justifyContent","marginTop","then","promoBanner","marginLeft","ad_format","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css'\nimport eruda from 'eruda';\n\nimport { Panel, PanelHeader, View , ScreenSpinner, List , Cell , Gallery , FormLayout , Input , Avatar , Group , Epic, Tabbar, TabbarItem, Separator, Button, PanelHeaderContext, Header, PanelHeaderSimple, PanelHeaderContent, Placeholder, Tabs,\n\tTabsItem, PullToRefresh, Snackbar, FixedLayout, PanelHeaderBack, PanelHeaderClose, CellButton, PromoBanner, Link, platform, IOS, ANDROID  } from '@vkontakte/vkui';\n\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\nimport Icon28AdvertisingOutline from '@vkontakte/icons/dist/28/advertising_outline';\n\nconst blueBackground = {\n\tbackgroundColor: 'var(--accent)'\n}, redBackground = {\n\tbackgroundColor: 'var(--dynamic_red)'\n}, os = platform();;\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpopout: null,\n\t\t\thistory: [\"main\"],\n\t\t\tactivePanel: \"main\",\n\n\t\t\tshow_native_ads: false,\n\t\t};\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.back = this.back.bind(this);\n\t\tthis.go = this.go.bind(this);\n\t\tthis.change_hash = this.change_hash.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.back(e);\n\t\t});\n\n\t\tbridge.subscribe(async ({ detail: { type, data }}) => {\n\t\t\tif(type !== undefined) console.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t\teruda.init();\n\t\t\t}\n\t\t});\n\t\tthis.initializeApp();\n\t}\n\n\tinitializeApp() {\n\t\tlet hash = window.location.hash;\n\t\tif (hash) {\n\t\t\thash = hash.replace('#','');\n\t\t\tthis.go(hash);\n\t\t}else{\n\t\t\tthis.change_hash('main');\n\t\t}\n\t}\n\n\tback = () => {\n\t\tif(this.state.popout !== null){\n\t\t\tthis.setState({ popout: null });\n\t\t\treturn ;\n\t\t}\n\t\tlet { activePanel, history } = this.state;\n\t\tif(activePanel === 'main'){\n\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t}else {\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tactivePanel = history[history.length - 1];\n\t\t\t\tthis.setState({activePanel});\n\t\t\t\tthis.change_hash(activePanel);\n\t\t\t}\n\t\t}\n\t};\n\tgo(panel) {\n\t\tlet history = this.state.history;\n\t\tif(history[history.length-1] !== panel) {\n\t\t\thistory.push(panel);\n\t\t\twindow.history.pushState({activePanel: panel}, 'Title');\n\t\t\tthis.setState({activePanel: panel, history, snackbar: null});\n\t\t}\n\t\tthis.change_hash(panel);\n\t}\n\tchange_hash (panel){\n\t\tbridge.send(\"VKWebAppSetLocation\", {\"location\": panel});\n\t}\n\n\tasync showSnackBar (text, icon, style, action, onActionClick){\n\t\tthis.setState({ snackbar: null });\n\t\tawait this.sleep(150);\n\t\tif(onActionClick === null) onActionClick = ()=> {};\n\t\tthis.setState({ snackbar:\n\t\t\t\t<Snackbar\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\n\t\t\t\t\tbefore={<Avatar size={24} style={style}>{icon}</Avatar>}\n\t\t\t\t\taction={action}\n\t\t\t\t\tonActionClick={onActionClick}\n\t\t\t\t>\n\t\t\t\t\t{text}\n\t\t\t\t</Snackbar>\n\t\t});\n\t}\n\tsleep(ms) {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout} history={this.state.history} onSwipeBack={this.back}>\n\t\t\t\t<Panel id='main'>\n\t\t\t\t\t<PanelHeader>Mini App</PanelHeader>\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t<Cell expandable before={<Icon28AdvertisingOutline/>} onClick={()=>{ this.go('advert') }}>\n\t\t\t\t\t\t\tРеклама\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t</Group>\n\t\t\t\t</Panel>\n\t\t\t\t<Panel id='advert'>\n\t\t\t\t\t<PanelHeader>Реклама</PanelHeader>\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t<Cell indicator={os === ANDROID ? 'Android' : os === IOS ? 'IOS' : 'Web'} expandable>\n\t\t\t\t\t\t\tПлатформа\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t</Group>\n\t\t\t\t\t<Group header={<Header mode='secondary'>Просмотр рекламы</Header>}>\n\t\t\t\t\t\t<Cell onClick={()=>{ if(os === IOS) { this.setState({ show_banner_ads: !this.state.show_banner_ads }); }else{ this.showSnackBar('IOS only', <Icon16CancelCircleOutline/>, redBackground); } }} asideContent={<Icon16Dropdown style={{ transform: `rotate(${this.state.show_banner_ads ? '180deg' : '0'})` }} />} expandable>Баннер</Cell>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.show_banner_ads &&\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Separator/>\n\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '8px' }}>\n\t\t\t\t\t\t\t\t\t<Button mode='primary' onClick={()=>{\n\t\t\t\t\t\t\t\t\t\tbridge.send('VKWebAppGetAds', {}).then(data => {\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ promoBanner: <PromoBanner onClose={() => { this.setState({promoBanner: null}); }} bannerData={data}/> });\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}>Показать</Button> <Button style={{ marginLeft: '8px' }} mode='secondary' onClick={()=>{ this.setState({promoBanner: null}); }}>Скрыть</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Cell onClick={()=>{ if(os === ANDROID){ this.setState({ show_native_ads: !this.state.show_native_ads }) }else{ this.showSnackBar('Android only', <Icon16CancelCircleOutline/>, redBackground) } }} asideContent={<Icon16Dropdown style={{ transform: `rotate(${this.state.show_native_ads ? '180deg' : '0'})` }} />} expandable>Полноэкранная</Cell>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.show_native_ads &&\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Separator/>\n\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '8px' }}>\n\t\t\t\t\t\t\t\t\t\t<Button mode='outline' onClick={()=>{ bridge.send('VKWebAppShowNativeAds', {ad_format:'preloader'}) }}>preloader</Button>\n\t\t\t\t\t\t\t\t\t\t<Button style={{ marginLeft: '8px' }}  mode='outline' onClick={()=>{ bridge.send('VKWebAppShowNativeAds', {ad_format:'reward'}) }}>reward</Button>\n\t\t\t\t\t\t\t\t\t\t<Button style={{ marginLeft: '8px' }}  mode='outline' onClick={()=>{ bridge.send('VKWebAppShowNativeAds', {ad_format:'interstitial'}) }}>interstitial</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Group>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.promoBanner &&\n\t\t\t\t\t\t<FixedLayout vertical=\"bottom\">\n\t\t\t\t\t\t\t{this.state.promoBanner}\n\t\t\t\t\t\t</FixedLayout>\n\t\t\t\t\t}\n\t\t\t\t\t{this.state.snackbar}\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}