{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\LoveTest\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\LoveTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\LoveTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\LoveTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\LoveTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\LoveTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\LoveTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\LoveTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./css/LoveTest.css';import html2canvas from'html2canvas';import{Panel,View,Placeholder,Button,Gallery,Title,FixedLayout,Div,Snackbar,ScreenSpinner}from'@vkontakte/vkui';import Icon28StoryOutline from'@vkontakte/icons/dist/28/story_outline';import Lottie from'react-lottie';import animDataHello from'./animations/hello.json';import animDataLove from'./animations/love.json';import animDataBrokenHeart from'./animations/broken_heart.json';import animDataHeart from'./animations/heart.json';import bgLight from'./img/bg-light.jpg';import bgDark from'./img/bg-dark.jpg';import downwards_black_arrow from'./img/downwards-black-arrow.png';import w1 from'./img/w1.jpg';import w2 from'./img/w2.jpg';import w3 from'./img/w3.jpg';import m1 from'./img/m1.jpg';import m2 from'./img/m2.jpg';import m3 from'./img/m3.jpg';var random=require('random');var app_id=7561605,group_id=197766832,prefix='_____';var LoveTest=/*#__PURE__*/function(_React$Component){_inherits(LoveTest,_React$Component);function LoveTest(props){var _this;_classCallCheck(this,LoveTest);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoveTest).call(this,props));_this.back=function(){if(_this.state.popout!==null){_this.setState({popout:null});window.history.pushState({pop:'popout'},'Title');return;}var _this$state=_this.state,activePanel=_this$state.activePanel,history=_this$state.history;if(history.length===1){bridge.send('VKWebAppClose',{status:'success'});}else if(history.length>1){history.pop();activePanel=history[history.length-1];_this.setState({activePanel:activePanel,history:history});}};_this.state={popout:null,history:['main'],activePanel:'main',data:{}};_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.back=_this.back.bind(_assertThisInitialized(_this));_this.go=_this.go.bind(_assertThisInitialized(_this));return _this;}_createClass(LoveTest,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.updateStorage();case 2:data=_context2.sent;if(!(data['gen'+prefix]!==false&&data['phrase'+prefix]!==false)){_context2.next=7;break;}_context2.next=6;return this.randomPhrase();case 6:this.go('panel5');case 7:bridge.send('VKWebAppInit');window.addEventListener('popstate',function(e){e.preventDefault();_this2.back(e);});bridge.subscribe(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$detail,type,data,schemeAttribute;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type!==undefined)console.log(type,data);if(type==='VKWebAppUpdateConfig'){schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=false?data.scheme?data.scheme:'bright_light':'space_gray';document.body.attributes.setNamedItem(schemeAttribute);}case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"updateStorage\",value:function(){var _updateStorage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var keys,sValues,data,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,value,nmbr;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:keys=['gen','phrase'];_context3.next=3;return bridge.sendPromise('VKWebAppStorageGet',{keys:(keys.join(prefix+',')+prefix).split(',')});case 3:sValues=_context3.sent;sValues=sValues.keys;data={};_context3.prev=6;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context3.prev=10;for(_iterator=sValues[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){value=_step.value;nmbr=Number(value.value);data[value.key]=value.value=='true'||value.value=='false'||value.value==''?value.value=='true':nmbr>0?nmbr:value.value;}_context3.next=18;break;case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](10);_didIteratorError=true;_iteratorError=_context3.t0;case 18:_context3.prev=18;_context3.prev=19;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}case 21:_context3.prev=21;if(!_didIteratorError){_context3.next=24;break;}throw _iteratorError;case 24:return _context3.finish(21);case 25:return _context3.finish(18);case 26:_context3.next=31;break;case 28:_context3.prev=28;_context3.t1=_context3[\"catch\"](6);console.error('e3',_context3.t1);case 31:this.setState({data:data,sValues:sValues});return _context3.abrupt(\"return\",data);case 33:case\"end\":return _context3.stop();}}},_callee3,this,[[6,28],[10,14,18,26],[19,,21,25]]);}));function updateStorage(){return _updateStorage.apply(this,arguments);}return updateStorage;}()},{key:\"go\",value:function go(panel){var _this$state2=this.state,history=_this$state2.history,activePanel=_this$state2.activePanel;if(history[history.length-1]!==panel){history.push(panel);window.history.pushState({activePanel:panel},'Title');activePanel=panel;this.setState({activePanel:activePanel,history:history});}}},{key:\"randomPhrase\",value:function(){var _randomPhrase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var woman,man,numM,numW,r;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:woman=['На линейке 1 сентября 2021 года жди очень крутых сюрпризов в твоей судьбе. Твой парень будет стоять слева от тебя и очень красиво смеяться. Посмейся ему в ответ.','Твои следующие отношения начнутся осенью этого года. Твоя половинка напишет тебе в вк, вы будете долго общаться в сети, пока не решите встретиться. Но когда вы встретитесь, это будет уже необратимый процесс.','Твои первые отношения начнутся после мучительных страданий от расставания с твоим нынешним парнем 13 января. Ты будешь гулять по парку в своих мыслях, когда твой будущий парень врежется прямо в тебя и ты упадешь. Он очень долго будет просить прощения, в итоге вы начнете встречаться.','Ты познакомишься со своей второй половинкой на отдыхе в турции следующим летом. Отдыхая на пляже твоя мама заговорит с мамой твоей половинки. Из-за этого вы начнете проводить время вместе. Одна неделя и ты уже никогда не сможешь его забыть.','Ты познакомишься со своей половинкой в интернете. В беседу твоей компании пригласят парня с очень странным именем. Ты поинтересуешься \"почему тебя так зовут!?\". 22 августа 2021 года вы уже будете встречаться.','Музыка сближает, правда ? Именно музыка сблизит тебя с твоим будущим парнем. На перемене ты будешь слушать \"The doors\" в наушника. Удивленный парень из параллельного класса спросит \" Что ты слушаешь? \". C тех пор вы будете неразделимы.','Твои следующие отношения начнутся в июне 2021 года. Твой будущий парень подойдет к тебе на прогулке в парке и неловко спросит как тебя зовут. Его робкий голос сразу застрянет в твоём сердечке.','На линейке 1 сентября 2020 года жди очень крутых сюрпризов в твоей судьбе. Твой парень будет стоять слева от тебя и очень красиво смеяться. Посмейся ему в ответ.','Твои следующие отношения начнутся 8 октября этого года, ты будешь как обычно выпивать с подругами на улице и к вам подойдет компания парней, один из них посмотрит на тебя и это будет влюбленность с первого взгляда.','Следующие отношения начнутся 14 сентября 2020 года. Ты будешь ожидать автобус и увидишь своего будущего парня. После неловких взглядов вы зайдете в автобус, случайно сев рядом, познакомитесь и разговоритесь.','Следующие отношения начнутся 28 декабря 2020 года. Ты пойдешь в магазин под новый год, подскользнешься на наледи и упадешь. Твоя будущая половинка подбежит помочь тебе подняться. Посмеявшись и отряхнувшись, вы узнаете имена друг друга. Он будет очень милый и высокий.','Следующие отношения начнутся 11 мая 2021 года. Ранним утром ты отправишься по делам. Вы не первый раз столкнетесь в лифте, но сегодня твой будущий парень наберется храбрости и напрямую спросит: \"не хочешь ли ты погулять вечером?\". Ты ответишь \"да\".','Следующие отношения начнутся 28 апреля 2021 года. На протяжении нескольких месяцев вы будете сталкиваться взглядами в метро. В очередной раз он не выдержит и подойдет познакомиться. \"Не может так быть, что бы мы случайно столько раз встретились\" - скажет он и вы договоритесь о свидании.','Следующие отношения начнутся 29 декабря 2020 года. Под новый год случаются чудеса, ведь ты познакомишься с ним. С первого взгляда ты поймешь, что он тот самый. Он будет двоюродным братом твоего одноклассника. Вы быстро найдете общий язык и договоритесь о свидании.','Вы встретитесь 1 января, в 00:15, он запустит феирверк прямо в твое окно. Ты спустишься к нему на разборку, вся такая потрепанная, и он влюбится в тебя. И не важно, что ты будешь крыть его матом.','Вы встретитесь где то в июле 2021. Ты заблудишься в лесу, выйдешь к дому лесника. Лесник умер, а его сын- красавчик пришел собрать вещи отца. И встретившись, вы сразу поймете, что будите жить на краю земли в этом доме и умрете в один день.','Следующие отношения начнутся 21 января 2021 года. Он будет около входа в кабинет к стоматологу. Ты подойдешь и тихо спросишь людей \"кто последний?\". Он единственных отзовется на твой вопрос. Вы познакомитесь и обменяетесь телефонами. На следующий день состоится ваше первое свидание.'],man=['Следующие отношения начнутся 14 сентября 2020 года. Ты будешь ожидать автобус и увидишь свою будущую девушку. После неловких взглядов вы зайдете в автобус, случайно сев рядом, познакомитесь и разговоритесь.','Следующие отношения начнутся 28 декабря 2020 года. Ты пойдешь в магазин под новый год, подскользнешься на наледи и упадешь. Твоя будущая половинка подбежит помочь тебе подняться. Посмеявшись и отряхнувшись, вы узнаете имена друг друга. Она будет очень милой и красивой.','Следующие отношения начнутся 11 мая 2021 года. Ранним утром ты отправишься по делам. Вы не первый раз столкнетесь в лифте, но сегодня твоя будущая девушка наберется храбрости и напрямую спросит: \"не хочешь ли ты погулять вечером?\". Ты ответишь \"да\".','Следующие отношения начнутся 28 апреля 2021 года. На протяжении нескольких месяцев вы будете сталкиваться взглядами в метро. В очередной раз ты не выдержишь и подойдешь познакомиться. \"Не может так быть, что бы мы случайно столько раз встретились\" - скажешь ты и вы договоритесь о свидании.','Следующие отношения начнутся 22 октября 2020 года. Ты будешь в плохом настроении в перерыве между учебой, но вдруг увидишь ее. Она будет стоять и изучать что-то на доске с информацией. Ты аккуратно подойдешь и пошутишь. Тебя заворожит ее звонкий смех. С этого дня вы начнете строить отношения.','Следующие отношения начнутся 18 ноября 2020 года. Ты не будешь знать как ее зовут, но она позвонит тебе и ты влюбишься в ее голос. Окажется, что она просто ошиблась номером, но ты найдешь ее в соц.сети по номеру телефона и вы начнете общаться.','Следующие отношения начнутся 12 февраля 2021 года. Ты не будешь ждать, что в такой пасмурный день может случиться что-то хорошее, но тут появится она. Ты столкнешься с ней около магазина и помимо своей воли увяжешься за ней. Она заметит, что ты идешь следом и повернется поздороваться. Окажется, что вы учились в параллельном классе.','Следующие отношения начнутся 27 сентября 2020 года. Это будет девушка из компании твоего друга. Вы познакомитесь на вечеринке. Она будет такой беззащитной и милой, что ты не сможешь не влюбиться. Через неделю вы пойдете на ваше первое свидание.','Следующие отношения начнутся 4 апреля 2021 года. Вы познакомитесь во время вечерней прогулки с друзьями. Встретившись с компанией девушек, твои друзья быстро найдут с ними общий язык, а ты будешь плестись сзади. Одна из девушек заметит это и присоединится к тебе. Ты узнаешь ее имя и полюбишь ее чудный голос. В этот день будет ваш первый поцелуй','Следующие отношения начнутся 12 февраля 2021 года. Голодный, ты зайдешь в кафе быстрого питания. Твоя будущая девушка будет стоять в соседней очереди. У нее будет волшебная фигура. Позже ты подсядешь к ней за столик и узнаешь, что она обожает бургеры и что \"у меня просто хороший обмен веществ\". Вы весело проведете время и уже через неделю начнете встречаться.','Следующие отношения начнутся 9 ноября 2020 года. Ты не первый месяц испытываешь симпатию к этой девушке, но все как-то не складывалось общение. В этот день вы случайно столкнетесь на светофоре. Ты проводишь ее до дома и предложишь встретиться еще раз. Она согласится и поцелует тебя в щечку.','Следующие отношения начнутся 3 декабря 2020 года. Она подойдет неожиданно и спросит, как пройти к какому-то дому. Ты застесняешься, но быстро посмотришь по картам в телефоне и попытаешься объяснить, как туда дойти. Видя, что она запуталась, ты решишь проводить ее. В конце пути ты возьмешь ее номер и уже на следующий день вы пойдете на свидание.','Следующие отношения начнутся 23 октября 2020 года. Тебя познакомит с ней твоя подруга. Окажется, что вы учились с ней в начальных классах. В этот же день будет ваш первый поцелуй.','Следующие отношения начнутся 29 декабря 2020 года. Под новый год случаются чудеса, ведь ты познакомишься с ней. С первого взгляда ты поймешь, что она та самая. Она будет двоюродной сестрой твоего одноклассника. Вы быстро найдете общий язык и договоритесь на свидание.','Следующие отношения начнутся 6 мая 2021 года. После неудачных отношений ты будешь отдыхать с друзьями, тусить и развлекаться. Ее пригласит один из твоих друзей. Странно, но она сама подойдет к тебе и познакомится. Тебя подкупит ее смелость и уже через пару дней вы начнете встречаться.','Следующие отношения начнутся 17 ноября 2020 года. Ты неожиданно поймешь, что тебе нравится твоя давняя знакомая. Вы всегда проводили много времени вместе, но ты не думал о ней, как о будущей девушке. Тогда ты решил пригласить ее на свидание, на что она с радостью согласилась. Через пару дней вы впервые поцелуетесь.'];numM=random.int(0,man.length-1),numW=random.int(0,woman.length-1);r=this.state.data['gen'+prefix]==='m'?this.state.data['phrase'+prefix]!==false?man[this.state.data['phrase'+prefix]]:man[numM]:this.state.data['phrase'+prefix]!==false?woman[this.state.data['phrase'+prefix]]:woman[numW];if(!(this.state.data['phrase'+prefix]===false)){_context4.next=8;break;}_context4.next=6;return bridge.sendPromise('VKWebAppStorageSet',{key:'phrase'+prefix,value:this.state.data['gen'+prefix]==='m'?numM.toString():numW.toString()});case 6:_context4.next=8;return this.updateStorage();case 8:this.setState({r:r});case 9:case\"end\":return _context4.stop();}}},_callee4,this);}));function randomPhrase(){return _randomPhrase.apply(this,arguments);}return randomPhrase;}()},{key:\"sleep\",value:function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}},{key:\"viewportToPixels\",value:function viewportToPixels(value){var parts=value.match(/([0-9\\.]+)(vh|vw)/);var q=Number(parts[1]);var side=window[['innerHeight','innerWidth'][['vh','vw'].indexOf(parts[2])]];return side*(q/100);}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(View,{activePanel:this.state.activePanel,popout:this.state.popout,history:this.state.history,onSwipeBack:this.back},React.createElement(Panel,{id:\"main\"},React.createElement(Placeholder,{icon:React.createElement(Lottie,{style:{pointerEvents:'none',transform:'translateX(20px)'},options:{animationData:animDataHello,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}},width:this.viewportToPixels('65vw')}),action:React.createElement(\"div\",null,React.createElement(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return bridge.sendPromise('VKWebAppStorageSet',{key:'gen'+prefix,value:'m'});case 2:_context5.next=4;return _this3.updateStorage();case 4:_this3.go('panel2');case 5:case\"end\":return _context5.stop();}}},_callee5);})),size:\"xl\"},\"\\u041C\\u0443\\u0436\\u0441\\u043A\\u043E\\u0439\"),React.createElement(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return bridge.sendPromise('VKWebAppStorageSet',{key:'gen'+prefix,value:'w'});case 2:_context6.next=4;return _this3.updateStorage();case 4:_this3.go('panel2');case 5:case\"end\":return _context6.stop();}}},_callee6);})),style:{marginTop:'12px'},mode:\"secondary\",size:\"xl\"},\"\\u0416\\u0435\\u043D\\u0441\\u043A\\u0438\\u0439\")),stretched:true},\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442! \\u0414\\u0430\\u0432\\u0430\\u0439 \\u043E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0438\\u043C\\u0441\\u044F \\u0441 \\u043F\\u043E\\u043B\\u043E\\u043C:\")),React.createElement(Panel,{id:\"panel2\"},React.createElement(Placeholder,{icon:React.createElement(Lottie,{style:{pointerEvents:'none'},options:{animationData:animDataLove,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}},width:this.viewportToPixels('65vw')}),action:React.createElement(\"div\",null,React.createElement(Button,{onClick:function onClick(){_this3.go('panel3');},size:\"xl\"},\"\\u0414\\u0430\"),React.createElement(Button,{onClick:function onClick(){_this3.go('panel4');},style:{marginTop:'12px'},mode:\"secondary\",size:\"xl\"},\"\\u041D\\u0435\\u0442\")),stretched:true},\"\\u0423 \\u0442\\u0435\\u0431\\u044F \\u043A\\u043E\\u0433\\u0434\\u0430-\\u043D\\u0438\\u0431\\u0443\\u0434\\u044C \\u0431\\u044B\\u043B\\u0438 \\u043E\\u0442\\u043D\\u043E\\u0448\\u0435\\u043D\\u0438\\u044F?\")),React.createElement(Panel,{id:\"panel3\"},React.createElement(Placeholder,{icon:React.createElement(Lottie,{style:{pointerEvents:'none'},options:{animationData:animDataBrokenHeart,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}},width:this.viewportToPixels('65vw')}),action:React.createElement(\"div\",null,React.createElement(Button,{onClick:function onClick(){_this3.go('panel4');},size:\"xl\"},\"\\u0412 \\u044D\\u0442\\u043E\\u043C \\u043C\\u0435\\u0441\\u044F\\u0446\\u0435\"),React.createElement(Button,{onClick:function onClick(){_this3.go('panel4');},style:{marginTop:'12px'},mode:\"secondary\",size:\"xl\"},\"\\u0411\\u043E\\u043B\\u044C\\u0448\\u0435 \\u043C\\u0435\\u0441\\u044F\\u0446\\u0430 \\u043D\\u0430\\u0437\\u0430\\u0434\")),stretched:true},\"\\u041A\\u043E\\u0433\\u0434\\u0430 \\u0437\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u043B\\u0438\\u0441\\u044C \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0435 \\u043E\\u0442\\u043D\\u043E\\u0448\\u0435\\u043D\\u0438\\u044F?\")),React.createElement(Panel,{id:\"panel4\"},React.createElement(Placeholder,{action:React.createElement(\"div\",null,this.state.data['gen'+prefix]==='m'?React.createElement(Gallery,{slideWidth:\"80%\",align:\"center\",style:{height:'auto',maxHeight:'70vh'}},React.createElement(\"img\",{style:{margin:'12px'},src:w1}),React.createElement(\"img\",{style:{margin:'12px'},src:w2}),React.createElement(\"img\",{style:{margin:'12px'},src:w3})):React.createElement(Gallery,{slideWidth:\"80%\",align:\"center\",style:{height:'auto',maxHeight:'70vh'}},React.createElement(\"img\",{style:{margin:'12px'},src:m1}),React.createElement(\"img\",{style:{margin:'12px'},src:m2}),React.createElement(\"img\",{style:{margin:'12px'},src:m3})),React.createElement(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return bridge.sendPromise('VKWebAppAllowMessagesFromGroup',{group_id:group_id,key:'dBuBKe1kFcdemzB'});case 3:_context7.next=5;return _this3.randomPhrase();case 5:_this3.go('panel5');_context7.next=12;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](0);console.error(_context7.t0);_this3.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this3.setState({snackbar:null});}},\"\\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0441\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u0440\\u0430\\u0437\\u0440\\u0435\\u0448\\u0438\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\")});case 12:case\"end\":return _context7.stop();}}},_callee7,null,[[0,8]]);})),style:{marginTop:'12px'},size:\"xl\"},\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C\")),stretched:true},\"\\u041A\\u0430\\u043A\\u0443\\u044E \\u0438\\u0437 \\u044D\\u0442\\u0438\\u0445 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043E\\u043A \\u0442\\u044B \\u0432\\u044B\\u0431\\u0435\\u0440\\u0435\\u0448\\u044C?\"),this.state.snackbar),React.createElement(Panel,{id:\"panel5\"},React.createElement(\"img\",{crossOrigin:\"anonymous\",src:bgDark,style:{height:'100vh'}}),React.createElement(Placeholder,{icon:React.createElement(Lottie,{style:{pointerEvents:'none'},options:{animationData:animDataHeart,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}},width:this.viewportToPixels('65vw')}),stretched:true},this.state.r),this.state.screen&&React.createElement(Title,{level:2,weight:\"semibold\",style:{position:'absolute',top:'75%',left:'50%',transform:'translate(-50%, 0%)',width:'80vw',textAlign:'center',color:'white'}},\"\\u041F\\u0435\\u0440\\u0435\\u0445\\u043E\\u0434\\u0438 \\u0432 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u0443\\u0437\\u043D\\u0430\\u0442\\u044C \\u043A\\u043E\\u0433\\u0434\\u0430 \\u0443 \\u0442\\u0435\\u0431\\u044F \\u0431\\u0443\\u0434\\u0443\\u0442 \\u0441\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u0438\\u0435 \\u043E\\u0442\\u043D\\u043E\\u0448\\u0435\\u043D\\u0438\\u044F\",React.createElement(\"br\",null),React.createElement(\"img\",{crossOrigin:'anonymous',style:{marginTop:'12px'},height:\"26px\",src:downwards_black_arrow}),React.createElement(\"img\",{crossOrigin:'anonymous',style:{marginLeft:'6px'},height:\"26px\",src:downwards_black_arrow}),React.createElement(\"img\",{crossOrigin:'anonymous',style:{marginLeft:'6px'},height:\"26px\",src:downwards_black_arrow})),!this.state.screen&&React.createElement(FixedLayout,{vertical:\"bottom\"},React.createElement(Div,{style:{marginBottom:'12px'}},React.createElement(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var element;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_this3.setState({popout:React.createElement(ScreenSpinner,null),screen:true});_context9.next=3;return _this3.sleep(750);case 3:element=document.getElementsByClassName('View__panels')[0];html2canvas(element,{allowTaint:true}).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(canvas){var blob;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_this3.setState({screen:false});_context8.next=3;return _this3.sleep(250);case 3:blob=canvas.toDataURL('image/png');_context8.prev=4;_context8.next=7;return bridge.send('VKWebAppShowStoryBox',{background_type:'image',blob:blob,attachment:{url:'https://vk.com/app'+app_id,text:'open',type:'url'}});case 7:_this3.setState({shared:true});_context8.next=12;break;case 10:_context8.prev=10;_context8.t0=_context8[\"catch\"](4);case 12:_this3.setState({popout:null});case 13:case\"end\":return _context8.stop();}}},_callee8,null,[[4,10]]);}));return function(_x2){return _ref7.apply(this,arguments);};}());case 5:case\"end\":return _context9.stop();}}},_callee9);})),before:React.createElement(Icon28StoryOutline,null),size:\"xl\",mode:\"commerce\"},\"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0432 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438\")))));}}]);return LoveTest;}(React.Component);export default LoveTest;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/LoveTest/src/LoveTest.js"],"names":["React","bridge","html2canvas","Panel","View","Placeholder","Button","Gallery","Title","FixedLayout","Div","Snackbar","ScreenSpinner","Icon28StoryOutline","Lottie","animDataHello","animDataLove","animDataBrokenHeart","animDataHeart","bgLight","bgDark","downwards_black_arrow","w1","w2","w3","m1","m2","m3","random","require","app_id","group_id","prefix","LoveTest","props","back","state","popout","setState","window","history","pushState","pop","activePanel","length","send","status","data","componentDidMount","bind","go","updateStorage","randomPhrase","addEventListener","e","preventDefault","subscribe","detail","type","undefined","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","keys","sendPromise","join","split","sValues","nmbr","Number","key","error","panel","push","woman","man","numM","int","numW","r","toString","ms","Promise","resolve","setTimeout","parts","match","q","side","indexOf","pointerEvents","transform","animationData","rendererSettings","preserveAspectRatio","viewportToPixels","marginTop","height","maxHeight","margin","snackbar","screen","position","top","left","width","textAlign","color","marginLeft","marginBottom","sleep","element","getElementsByClassName","allowTaint","then","canvas","blob","toDataURL","background_type","attachment","url","text","shared","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './css/LoveTest.css';\r\n\r\nimport html2canvas from 'html2canvas';\r\n\r\nimport {Panel, View, Placeholder, Button, Gallery, Title, FixedLayout, Div, Snackbar, ScreenSpinner} from '@vkontakte/vkui';\r\n\r\nimport Icon28StoryOutline from '@vkontakte/icons/dist/28/story_outline';\r\n\r\nimport Lottie from 'react-lottie';\r\nimport animDataHello from './animations/hello.json';\r\nimport animDataLove from './animations/love.json';\r\nimport animDataBrokenHeart from './animations/broken_heart.json';\r\nimport animDataHeart from './animations/heart.json';\r\n\r\nimport bgLight from './img/bg-light.jpg';\r\nimport bgDark from './img/bg-dark.jpg';\r\nimport downwards_black_arrow from './img/downwards-black-arrow.png';\r\nimport w1 from './img/w1.jpg';\r\nimport w2 from './img/w2.jpg';\r\nimport w3 from './img/w3.jpg';\r\nimport m1 from './img/m1.jpg';\r\nimport m2 from './img/m2.jpg';\r\nimport m3 from './img/m3.jpg';\r\n\r\nconst random = require('random');\r\n\r\nlet app_id = 7561605,\r\n    group_id = 197766832,\r\n    prefix = '_____';\r\n\r\nclass LoveTest extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            popout: null,\r\n            history: [ 'main' ],\r\n            activePanel: 'main',\r\n            data: {}\r\n        };\r\n\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.back = this.back.bind(this);\r\n        this.go = this.go.bind(this);\r\n    }\r\n\r\n    async componentDidMount () {\r\n        let data = await this.updateStorage();\r\n\r\n        if(data['gen' + prefix] !== false && data['phrase' + prefix] !== false) {\r\n            await this.randomPhrase();\r\n            this.go('panel5');\r\n        }\r\n\r\n        bridge.send('VKWebAppInit');\r\n\r\n        window.addEventListener('popstate', e => {\r\n            e.preventDefault();\r\n            this.back(e);\r\n        });\r\n\r\n        bridge.subscribe(async ({ detail: { type, data }}) => {\r\n            if (type !== undefined) console.log(type, data);\r\n            if (type === 'VKWebAppUpdateConfig') {\r\n                const schemeAttribute = document.createAttribute('scheme');\r\n                schemeAttribute.value = false ? data.scheme ? data.scheme : 'bright_light' : 'space_gray';\r\n                document.body.attributes.setNamedItem(schemeAttribute);\r\n            }\r\n        });\r\n    }\r\n\r\n    async updateStorage () {\r\n        let keys = ['gen', 'phrase'];\r\n        let sValues = await bridge.sendPromise('VKWebAppStorageGet', {keys: (keys.join(prefix+',') + prefix).split(',') });\r\n        sValues = sValues.keys;\r\n        let data = {};\r\n        try{\r\n            for(let value of sValues){\r\n                let nmbr = Number(value.value);\r\n                data[value.key] = (value.value == 'true' || value.value == 'false' || value.value == '') ? value.value == 'true' : nmbr > 0 ? nmbr : value.value;\r\n            }\r\n        }catch (e) {\r\n            console.error('e3', e)\r\n        }\r\n        this.setState({ data, sValues });\r\n\r\n        return data;\r\n    }\r\n\r\n    back = () => {\r\n        if(this.state.popout !== null){\r\n            this.setState({ popout: null });\r\n            window.history.pushState({ pop: 'popout' }, 'Title');\r\n            return ;\r\n        }\r\n        let { activePanel, history } = this.state;\r\n        if(history.length === 1) {\r\n            bridge.send('VKWebAppClose', { status: 'success' });\r\n        } else if (history.length > 1) {\r\n            history.pop();\r\n            activePanel = history[history.length - 1];\r\n            this.setState({ activePanel, history });\r\n        }\r\n    };\r\n    go(panel) {\r\n        let { history, activePanel } = this.state;\r\n        if(history[history.length-1] !== panel) {\r\n            history.push(panel);\r\n            window.history.pushState({ activePanel: panel }, 'Title');\r\n            activePanel = panel;\r\n            this.setState({ activePanel, history });\r\n        }\r\n    }\r\n\r\n    async randomPhrase () {\r\n        let woman = [\r\n            'На линейке 1 сентября 2021 года жди очень крутых сюрпризов в твоей судьбе. Твой парень будет стоять слева от тебя и очень красиво смеяться. Посмейся ему в ответ.',\r\n            'Твои следующие отношения начнутся осенью этого года. Твоя половинка напишет тебе в вк, вы будете долго общаться в сети, пока не решите встретиться. Но когда вы встретитесь, это будет уже необратимый процесс.',\r\n            'Твои первые отношения начнутся после мучительных страданий от расставания с твоим нынешним парнем 13 января. Ты будешь гулять по парку в своих мыслях, когда твой будущий парень врежется прямо в тебя и ты упадешь. Он очень долго будет просить прощения, в итоге вы начнете встречаться.',\r\n            'Ты познакомишься со своей второй половинкой на отдыхе в турции следующим летом. Отдыхая на пляже твоя мама заговорит с мамой твоей половинки. Из-за этого вы начнете проводить время вместе. Одна неделя и ты уже никогда не сможешь его забыть.',\r\n            'Ты познакомишься со своей половинкой в интернете. В беседу твоей компании пригласят парня с очень странным именем. Ты поинтересуешься \"почему тебя так зовут!?\". 22 августа 2021 года вы уже будете встречаться.',\r\n            'Музыка сближает, правда ? Именно музыка сблизит тебя с твоим будущим парнем. На перемене ты будешь слушать \"The doors\" в наушника. Удивленный парень из параллельного класса спросит \" Что ты слушаешь? \". C тех пор вы будете неразделимы.',\r\n            'Твои следующие отношения начнутся в июне 2021 года. Твой будущий парень подойдет к тебе на прогулке в парке и неловко спросит как тебя зовут. Его робкий голос сразу застрянет в твоём сердечке.',\r\n            'На линейке 1 сентября 2020 года жди очень крутых сюрпризов в твоей судьбе. Твой парень будет стоять слева от тебя и очень красиво смеяться. Посмейся ему в ответ.',\r\n            'Твои следующие отношения начнутся 8 октября этого года, ты будешь как обычно выпивать с подругами на улице и к вам подойдет компания парней, один из них посмотрит на тебя и это будет влюбленность с первого взгляда.',\r\n            'Следующие отношения начнутся 14 сентября 2020 года. Ты будешь ожидать автобус и увидишь своего будущего парня. После неловких взглядов вы зайдете в автобус, случайно сев рядом, познакомитесь и разговоритесь.',\r\n            'Следующие отношения начнутся 28 декабря 2020 года. Ты пойдешь в магазин под новый год, подскользнешься на наледи и упадешь. Твоя будущая половинка подбежит помочь тебе подняться. Посмеявшись и отряхнувшись, вы узнаете имена друг друга. Он будет очень милый и высокий.',\r\n            'Следующие отношения начнутся 11 мая 2021 года. Ранним утром ты отправишься по делам. Вы не первый раз столкнетесь в лифте, но сегодня твой будущий парень наберется храбрости и напрямую спросит: \"не хочешь ли ты погулять вечером?\". Ты ответишь \"да\".',\r\n            'Следующие отношения начнутся 28 апреля 2021 года. На протяжении нескольких месяцев вы будете сталкиваться взглядами в метро. В очередной раз он не выдержит и подойдет познакомиться. \"Не может так быть, что бы мы случайно столько раз встретились\" - скажет он и вы договоритесь о свидании.',\r\n            'Следующие отношения начнутся 29 декабря 2020 года. Под новый год случаются чудеса, ведь ты познакомишься с ним. С первого взгляда ты поймешь, что он тот самый. Он будет двоюродным братом твоего одноклассника. Вы быстро найдете общий язык и договоритесь о свидании.',\r\n            'Вы встретитесь 1 января, в 00:15, он запустит феирверк прямо в твое окно. Ты спустишься к нему на разборку, вся такая потрепанная, и он влюбится в тебя. И не важно, что ты будешь крыть его матом.',\r\n            'Вы встретитесь где то в июле 2021. Ты заблудишься в лесу, выйдешь к дому лесника. Лесник умер, а его сын- красавчик пришел собрать вещи отца. И встретившись, вы сразу поймете, что будите жить на краю земли в этом доме и умрете в один день.',\r\n            'Следующие отношения начнутся 21 января 2021 года. Он будет около входа в кабинет к стоматологу. Ты подойдешь и тихо спросишь людей \"кто последний?\". Он единственных отзовется на твой вопрос. Вы познакомитесь и обменяетесь телефонами. На следующий день состоится ваше первое свидание.'\r\n        ],\r\n            man = [\r\n                'Следующие отношения начнутся 14 сентября 2020 года. Ты будешь ожидать автобус и увидишь свою будущую девушку. После неловких взглядов вы зайдете в автобус, случайно сев рядом, познакомитесь и разговоритесь.',\r\n                'Следующие отношения начнутся 28 декабря 2020 года. Ты пойдешь в магазин под новый год, подскользнешься на наледи и упадешь. Твоя будущая половинка подбежит помочь тебе подняться. Посмеявшись и отряхнувшись, вы узнаете имена друг друга. Она будет очень милой и красивой.',\r\n                'Следующие отношения начнутся 11 мая 2021 года. Ранним утром ты отправишься по делам. Вы не первый раз столкнетесь в лифте, но сегодня твоя будущая девушка наберется храбрости и напрямую спросит: \"не хочешь ли ты погулять вечером?\". Ты ответишь \"да\".',\r\n                'Следующие отношения начнутся 28 апреля 2021 года. На протяжении нескольких месяцев вы будете сталкиваться взглядами в метро. В очередной раз ты не выдержишь и подойдешь познакомиться. \"Не может так быть, что бы мы случайно столько раз встретились\" - скажешь ты и вы договоритесь о свидании.',\r\n                'Следующие отношения начнутся 22 октября 2020 года. Ты будешь в плохом настроении в перерыве между учебой, но вдруг увидишь ее. Она будет стоять и изучать что-то на доске с информацией. Ты аккуратно подойдешь и пошутишь. Тебя заворожит ее звонкий смех. С этого дня вы начнете строить отношения.',\r\n                'Следующие отношения начнутся 18 ноября 2020 года. Ты не будешь знать как ее зовут, но она позвонит тебе и ты влюбишься в ее голос. Окажется, что она просто ошиблась номером, но ты найдешь ее в соц.сети по номеру телефона и вы начнете общаться.',\r\n                'Следующие отношения начнутся 12 февраля 2021 года. Ты не будешь ждать, что в такой пасмурный день может случиться что-то хорошее, но тут появится она. Ты столкнешься с ней около магазина и помимо своей воли увяжешься за ней. Она заметит, что ты идешь следом и повернется поздороваться. Окажется, что вы учились в параллельном классе.',\r\n                'Следующие отношения начнутся 27 сентября 2020 года. Это будет девушка из компании твоего друга. Вы познакомитесь на вечеринке. Она будет такой беззащитной и милой, что ты не сможешь не влюбиться. Через неделю вы пойдете на ваше первое свидание.',\r\n                'Следующие отношения начнутся 4 апреля 2021 года. Вы познакомитесь во время вечерней прогулки с друзьями. Встретившись с компанией девушек, твои друзья быстро найдут с ними общий язык, а ты будешь плестись сзади. Одна из девушек заметит это и присоединится к тебе. Ты узнаешь ее имя и полюбишь ее чудный голос. В этот день будет ваш первый поцелуй',\r\n                'Следующие отношения начнутся 12 февраля 2021 года. Голодный, ты зайдешь в кафе быстрого питания. Твоя будущая девушка будет стоять в соседней очереди. У нее будет волшебная фигура. Позже ты подсядешь к ней за столик и узнаешь, что она обожает бургеры и что \"у меня просто хороший обмен веществ\". Вы весело проведете время и уже через неделю начнете встречаться.',\r\n                'Следующие отношения начнутся 9 ноября 2020 года. Ты не первый месяц испытываешь симпатию к этой девушке, но все как-то не складывалось общение. В этот день вы случайно столкнетесь на светофоре. Ты проводишь ее до дома и предложишь встретиться еще раз. Она согласится и поцелует тебя в щечку.',\r\n                'Следующие отношения начнутся 3 декабря 2020 года. Она подойдет неожиданно и спросит, как пройти к какому-то дому. Ты застесняешься, но быстро посмотришь по картам в телефоне и попытаешься объяснить, как туда дойти. Видя, что она запуталась, ты решишь проводить ее. В конце пути ты возьмешь ее номер и уже на следующий день вы пойдете на свидание.',\r\n                'Следующие отношения начнутся 23 октября 2020 года. Тебя познакомит с ней твоя подруга. Окажется, что вы учились с ней в начальных классах. В этот же день будет ваш первый поцелуй.',\r\n                'Следующие отношения начнутся 29 декабря 2020 года. Под новый год случаются чудеса, ведь ты познакомишься с ней. С первого взгляда ты поймешь, что она та самая. Она будет двоюродной сестрой твоего одноклассника. Вы быстро найдете общий язык и договоритесь на свидание.',\r\n                'Следующие отношения начнутся 6 мая 2021 года. После неудачных отношений ты будешь отдыхать с друзьями, тусить и развлекаться. Ее пригласит один из твоих друзей. Странно, но она сама подойдет к тебе и познакомится. Тебя подкупит ее смелость и уже через пару дней вы начнете встречаться.',\r\n                'Следующие отношения начнутся 17 ноября 2020 года. Ты неожиданно поймешь, что тебе нравится твоя давняя знакомая. Вы всегда проводили много времени вместе, но ты не думал о ней, как о будущей девушке. Тогда ты решил пригласить ее на свидание, на что она с радостью согласилась. Через пару дней вы впервые поцелуетесь.'\r\n            ];\r\n\r\n        let numM = random.int(0, man.length-1),\r\n            numW = random.int(0, woman.length-1);\r\n\r\n        let r = this.state.data['gen' + prefix] === 'm' ?\r\n            this.state.data['phrase' + prefix] !== false ? man[this.state.data['phrase' + prefix]] : man[numM]\r\n            :\r\n            this.state.data['phrase' + prefix] !== false ? woman[this.state.data['phrase' + prefix]] : woman[numW];\r\n\r\n        if(this.state.data['phrase' + prefix] === false){\r\n            await bridge.sendPromise('VKWebAppStorageSet', {key: 'phrase' + prefix, value: this.state.data['gen' + prefix] === 'm' ? numM.toString() : numW.toString()});\r\n            await this.updateStorage();\r\n        }\r\n\r\n        this.setState({ r });\r\n    }\r\n\r\n    sleep(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    viewportToPixels(value) {\r\n        let parts = value.match(/([0-9\\.]+)(vh|vw)/);\r\n        let q = Number(parts[1])\r\n        let side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]];\r\n        return side * (q/100)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View activePanel={this.state.activePanel} popout={this.state.popout} history={this.state.history} onSwipeBack={this.back}>\r\n                <Panel id='main'>\r\n                    <Placeholder\r\n                        icon={\r\n                            <Lottie style={{ pointerEvents: 'none', transform: 'translateX(20px)' }} options={{\r\n                                animationData: animDataHello,\r\n                                rendererSettings: {\r\n                                    preserveAspectRatio: 'xMidYMid slice'\r\n                                }\r\n                            }} width={this.viewportToPixels('65vw')}\r\n                            />\r\n                        }\r\n                        action={<div>\r\n                            <Button onClick={async ()=>{\r\n                                await bridge.sendPromise('VKWebAppStorageSet', {key: 'gen' + prefix, value: 'm'});\r\n                                await this.updateStorage();\r\n                                this.go('panel2'); }} size='xl'>Мужской</Button>\r\n                            <Button onClick={async()=>{\r\n                                await bridge.sendPromise('VKWebAppStorageSet', {key: 'gen' + prefix, value: 'w'});\r\n                                await this.updateStorage();\r\n                                this.go('panel2'); }} style={{ marginTop: '12px' }} mode='secondary' size='xl'>Женский</Button>\r\n                        </div>}\r\n                        stretched\r\n                    >\r\n                        Привет! Давай определимся с полом:\r\n                    </Placeholder>\r\n                </Panel>\r\n                <Panel id='panel2'>\r\n                    <Placeholder\r\n                        icon={\r\n                            <Lottie style={{ pointerEvents: 'none' }} options={{\r\n                                animationData: animDataLove,\r\n                                rendererSettings: {\r\n                                    preserveAspectRatio: 'xMidYMid slice'\r\n                                }\r\n                            }} width={this.viewportToPixels('65vw')}\r\n                            />\r\n                        }\r\n                        action={<div>\r\n                            <Button onClick={()=>{ this.go('panel3') }} size='xl'>Да</Button>\r\n                            <Button onClick={()=>{ this.go('panel4') }} style={{ marginTop: '12px' }} mode='secondary' size='xl'>Нет</Button>\r\n                        </div>}\r\n                        stretched\r\n                    >\r\n                        У тебя когда-нибудь были отношения?\r\n                    </Placeholder>\r\n                </Panel>\r\n                <Panel id='panel3'>\r\n                    <Placeholder\r\n                        icon={\r\n                            <Lottie style={{ pointerEvents: 'none' }} options={{\r\n                                animationData: animDataBrokenHeart,\r\n                                rendererSettings: {\r\n                                    preserveAspectRatio: 'xMidYMid slice'\r\n                                }\r\n                            }} width={this.viewportToPixels('65vw')}\r\n                            />\r\n                        }\r\n                        action={<div>\r\n                            <Button onClick={()=>{ this.go('panel4') }} size='xl'>В этом месяце</Button>\r\n                            <Button onClick={()=>{ this.go('panel4') }} style={{ marginTop: '12px' }} mode='secondary' size='xl'>Больше месяца назад</Button>\r\n                        </div>}\r\n                        stretched\r\n                    >\r\n                        Когда закончились последние отношения?\r\n                    </Placeholder>\r\n                </Panel>\r\n                <Panel id='panel4'>\r\n                    <Placeholder\r\n                        action={<div>\r\n                            {\r\n                                this.state.data['gen' + prefix] === 'm' ?\r\n                                    <Gallery\r\n                                        slideWidth='80%'\r\n                                        align='center'\r\n                                        style={{ height: 'auto', maxHeight: '70vh' }}\r\n                                    >\r\n                                        <img style={{ margin: '12px' }} src={w1} />\r\n                                        <img style={{ margin: '12px' }} src={w2} />\r\n                                        <img style={{ margin: '12px' }} src={w3} />\r\n                                    </Gallery>\r\n                                    :\r\n                                    <Gallery\r\n                                        slideWidth='80%'\r\n                                        align='center'\r\n                                        style={{ height: 'auto', maxHeight: '70vh' }}\r\n                                    >\r\n                                        <img style={{ margin: '12px' }} src={m1} />\r\n                                        <img style={{ margin: '12px' }} src={m2} />\r\n                                        <img style={{ margin: '12px' }} src={m3} />\r\n                                    </Gallery>\r\n                            }\r\n                            <Button onClick={async ()=>{ \r\n                                try{\r\n                                    await bridge.sendPromise('VKWebAppAllowMessagesFromGroup', {group_id, key: 'dBuBKe1kFcdemzB'});\r\n                                    await this.randomPhrase();\r\n                                    this.go('panel5');\r\n                                }catch (e) {\r\n                                    console.error(e);\r\n                                    this.setState({ snackbar:\r\n                                            <Snackbar\r\n                                                layout='vertical'\r\n                                                onClose={() => this.setState({ snackbar: null })}\r\n                                            >\r\n                                                Необходимо сначала разрешить сообщения\r\n                                            </Snackbar>\r\n                                    });\r\n                                }\r\n                            }} style={{ marginTop: '12px' }} size='xl'>Выбрать</Button>\r\n                        </div>}\r\n                        stretched\r\n                    >\r\n                        Какую из этих картинок ты выберешь?\r\n                    </Placeholder>\r\n                    { this.state.snackbar }\r\n                </Panel>\r\n                <Panel id='panel5'>\r\n                    <img crossOrigin='anonymous' src={bgDark} style={{ height: '100vh' }}/>\r\n                    <Placeholder\r\n                        icon={\r\n                            <Lottie style={{ pointerEvents: 'none' }} options={{\r\n                                animationData: animDataHeart,\r\n                                rendererSettings: {\r\n                                    preserveAspectRatio: 'xMidYMid slice'\r\n                                }\r\n                            }} width={this.viewportToPixels('65vw')}\r\n                            />\r\n                        }\r\n                        stretched\r\n                    >\r\n                        { this.state.r }\r\n                    </Placeholder>\r\n                    {\r\n                        this.state.screen &&\r\n                        <Title level={2} weight='semibold' style={{ position: 'absolute', top: '75%', left: '50%', transform: 'translate(-50%, 0%)', width: '80vw', textAlign: 'center', color: 'white' }}>\r\n                            Переходи в приложение, чтобы узнать когда у тебя будут следующие отношения\r\n                            <br/>\r\n                            <img crossOrigin={'anonymous'} style={{ marginTop: '12px' }} height='26px' src={downwards_black_arrow}/>\r\n                            <img crossOrigin={'anonymous'} style={{ marginLeft: '6px' }} height='26px' src={downwards_black_arrow}/>\r\n                            <img crossOrigin={'anonymous'} style={{ marginLeft: '6px' }} height='26px' src={downwards_black_arrow}/>\r\n                        </Title>\r\n                    }\r\n\r\n                    {\r\n                        !this.state.screen &&\r\n                        <FixedLayout vertical='bottom'>\r\n                            <Div style={{ marginBottom: '12px' }}>\r\n                                <Button onClick={async ()=>{\r\n                                    this.setState({ popout: <ScreenSpinner/>, screen: true });\r\n                                    await this.sleep(750);\r\n                                    let element = document.getElementsByClassName('View__panels')[0];\r\n                                    html2canvas(element, { allowTaint: true }).then(async canvas => {\r\n                                        this.setState({ screen: false });\r\n                                        await this.sleep(250);\r\n                                        let blob = canvas.toDataURL('image/png');\r\n\r\n                                        try{\r\n                                            await bridge.send('VKWebAppShowStoryBox', {\r\n                                                background_type: 'image', blob, attachment: { url: 'https://vk.com/app' + app_id, text: 'open', type: 'url' }\r\n                                            });\r\n                                            this.setState({ shared: true });\r\n                                        }catch (e) {}\r\n                                        this.setState({ popout: null });\r\n                                    });\r\n                                }} before={<Icon28StoryOutline />} size='xl' mode='commerce'>Поделиться в истории</Button>\r\n                            </Div>\r\n                        </FixedLayout>\r\n                    }\r\n                </Panel>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LoveTest;"]},"metadata":{},"sourceType":"module"}