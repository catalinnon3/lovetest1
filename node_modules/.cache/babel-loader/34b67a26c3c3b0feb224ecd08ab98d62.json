{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\src\\\\LoveTest.js\";\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/LoveTest.css';\nimport { Panel, View, Placeholder, Button } from '@vkontakte/vkui';\nimport EmojiHand from './img/emoji_hand.png';\n\nclass Tracker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.back = () => {\n      if (this.state.popout !== null) {\n        this.setState({\n          popout: null\n        });\n        window.history.pushState({\n          pop: 'popout'\n        }, 'Title');\n        return;\n      }\n\n      let _this$state = this.state,\n          activePanel = _this$state.activePanel,\n          history = _this$state.history;\n\n      if (history.length === 1) {\n        bridge.send('VKWebAppClose', {\n          status: 'success'\n        });\n      } else if (history.length > 1) {\n        history.pop();\n        activePanel = history[history.length - 1];\n        this.setState({\n          activePanel,\n          history\n        });\n      }\n    };\n\n    this.state = {\n      popout: null,\n      history: ['main'],\n      activePanel: 'main'\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.back = this.back.bind(this);\n    this.go = this.go.bind(this);\n  }\n\n  async componentDidMount() {\n    bridge.send('VKWebAppInit');\n    window.addEventListener('popstate', e => {\n      e.preventDefault();\n      this.back(e);\n    });\n    bridge.subscribe(async ({\n      detail: {\n        type,\n        data\n      }\n    }) => {\n      if (type !== undefined) console.log(type, data);\n\n      if (type === 'VKWebAppUpdateConfig') {\n        const schemeAttribute = document.createAttribute('scheme');\n        schemeAttribute.value = data.scheme ? data.scheme : 'bright_light';\n        document.body.attributes.setNamedItem(schemeAttribute);\n      }\n    });\n  }\n\n  go(panel) {\n    let _this$state2 = this.state,\n        history = _this$state2.history,\n        activePanel = _this$state2.activePanel;\n\n    if (history[history.length - 1] !== panel) {\n      history.push(panel);\n      window.history.pushState({\n        activePanel: panel\n      }, 'Title');\n      activePanel = panel;\n      this.setState({\n        activePanel,\n        history\n      });\n    }\n  }\n\n  sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  render() {\n    return React.createElement(View, {\n      activePanel: this.state.activePanel,\n      popout: this.state.popout,\n      history: this.state.history,\n      onSwipeBack: this.back,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Panel, {\n      id: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(Placeholder, {\n      icon: React.createElement(\"img\", {\n        src: EmojiHand,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }),\n      action: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: () => {\n          this.go('panel2');\n        },\n        size: \"xl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"\\u041C\\u0443\\u0436\\u0441\\u043A\\u043E\\u0439\"), React.createElement(Button, {\n        onClick: () => {\n          this.go('panel2');\n        },\n        mode: \"secondary\",\n        size: \"xl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"\\u0416\\u0435\\u043D\\u0441\\u043A\\u0438\\u0439\")),\n      stretched: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442! \\u0414\\u0430\\u0432\\u0430\\u0439 \\u043E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0438\\u043C\\u0441\\u044F \\u0441 \\u043F\\u043E\\u043B\\u043E\\u043C:\")));\n  }\n\n}\n\nexport default Tracker;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/TestMiniApp/src/LoveTest.js"],"names":["React","bridge","Panel","View","Placeholder","Button","EmojiHand","Tracker","Component","constructor","props","back","state","popout","setState","window","history","pushState","pop","activePanel","length","send","status","componentDidMount","bind","go","addEventListener","e","preventDefault","subscribe","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","panel","push","sleep","ms","Promise","resolve","setTimeout","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './css/LoveTest.css';\r\n\r\nimport {Panel, View, Placeholder, Button} from '@vkontakte/vkui';\r\n\r\nimport EmojiHand from './img/emoji_hand.png';\r\n\r\nclass Tracker extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            popout: null,\r\n            history: [ 'main' ],\r\n            activePanel: 'main',\r\n        };\r\n\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.back = this.back.bind(this);\r\n        this.go = this.go.bind(this);\r\n    }\r\n\r\n    async componentDidMount () {\r\n        bridge.send('VKWebAppInit');\r\n\r\n        window.addEventListener('popstate', e => {\r\n            e.preventDefault();\r\n            this.back(e);\r\n        });\r\n\r\n        bridge.subscribe(async ({ detail: { type, data }}) => {\r\n            if (type !== undefined) console.log(type, data);\r\n            if (type === 'VKWebAppUpdateConfig') {\r\n                const schemeAttribute = document.createAttribute('scheme');\r\n                schemeAttribute.value = data.scheme ? data.scheme : 'bright_light';\r\n                document.body.attributes.setNamedItem(schemeAttribute);\r\n            }\r\n        });\r\n    }\r\n\r\n    back = () => {\r\n        if(this.state.popout !== null){\r\n            this.setState({ popout: null });\r\n            window.history.pushState({ pop: 'popout' }, 'Title');\r\n            return ;\r\n        }\r\n        let { activePanel, history } = this.state;\r\n        if(history.length === 1) {\r\n            bridge.send('VKWebAppClose', { status: 'success' });\r\n        } else if (history.length > 1) {\r\n            history.pop();\r\n            activePanel = history[history.length - 1];\r\n            this.setState({ activePanel, history });\r\n        }\r\n    };\r\n    go(panel) {\r\n        let { history, activePanel } = this.state;\r\n        if(history[history.length-1] !== panel) {\r\n            history.push(panel);\r\n            window.history.pushState({ activePanel: panel }, 'Title');\r\n            activePanel = panel;\r\n            this.setState({ activePanel, history });\r\n        }\r\n    }\r\n\r\n    sleep(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View activePanel={this.state.activePanel} popout={this.state.popout} history={this.state.history} onSwipeBack={this.back}>\r\n                <Panel id='main'>\r\n                    <Placeholder\r\n                        icon={<img src={EmojiHand}/>}\r\n                        action={<div>\r\n                            <Button onClick={()=>{ this.go('panel2') }} size='xl'>Мужской</Button>\r\n                            <Button onClick={()=>{ this.go('panel2') }} mode='secondary' size='xl'>Женский</Button>\r\n                        </div>}\r\n                        stretched\r\n                    >\r\n                        Привет! Давай определимся с полом:\r\n                    </Placeholder>\r\n                </Panel>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Tracker;"]},"metadata":{},"sourceType":"module"}