{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\TestMiniApp\\\\src\\\\LoveTest.js\";\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/LoveTest.css';\nimport { Panel, View, Placeholder, Button, Gallery, Title, FixedLayout, Div } from '@vkontakte/vkui';\nimport Icon28StoryOutline from '@vkontakte/icons/dist/28/story_outline';\nimport bg1 from './img/bg1.jpg';\nimport Lottie from 'react-lottie';\nimport animDataHello from './animations/hello.json';\nimport animDataLove from './animations/love.json';\nimport animDataBrokenHeart from './animations/broken_heart.json';\nimport animDataHeart from './animations/heart.json';\n\nclass Tracker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.back = () => {\n      if (this.state.popout !== null) {\n        this.setState({\n          popout: null\n        });\n        window.history.pushState({\n          pop: 'popout'\n        }, 'Title');\n        return;\n      }\n\n      let _this$state = this.state,\n          activePanel = _this$state.activePanel,\n          history = _this$state.history;\n\n      if (history.length === 1) {\n        bridge.send('VKWebAppClose', {\n          status: 'success'\n        });\n      } else if (history.length > 1) {\n        history.pop();\n        activePanel = history[history.length - 1];\n        this.setState({\n          activePanel,\n          history\n        });\n      }\n    };\n\n    this.state = {\n      popout: null,\n      history: ['main'],\n      activePanel: 'main'\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.back = this.back.bind(this);\n    this.go = this.go.bind(this);\n  }\n\n  async componentDidMount() {\n    bridge.send('VKWebAppInit');\n    window.addEventListener('popstate', e => {\n      e.preventDefault();\n      this.back(e);\n    });\n    bridge.subscribe(async ({\n      detail: {\n        type,\n        data\n      }\n    }) => {\n      if (type !== undefined) console.log(type, data);\n\n      if (type === 'VKWebAppUpdateConfig') {\n        const schemeAttribute = document.createAttribute('scheme');\n        schemeAttribute.value = data.scheme ? data.scheme : 'bright_light';\n        document.body.attributes.setNamedItem(schemeAttribute);\n      }\n    });\n  }\n\n  go(panel) {\n    let _this$state2 = this.state,\n        history = _this$state2.history,\n        activePanel = _this$state2.activePanel;\n\n    if (history[history.length - 1] !== panel) {\n      history.push(panel);\n      window.history.pushState({\n        activePanel: panel\n      }, 'Title');\n      activePanel = panel;\n      this.setState({\n        activePanel,\n        history\n      });\n    }\n  }\n\n  sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  viewportToPixels(value) {\n    let parts = value.match(/([0-9\\.]+)(vh|vw)/);\n    let q = Number(parts[1]);\n    let side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]];\n    return side * (q / 100);\n  }\n\n  render() {\n    return React.createElement(View, {\n      activePanel: this.state.activePanel,\n      popout: this.state.popout,\n      history: this.state.history,\n      onSwipeBack: this.back,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(Panel, {\n      id: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Placeholder, {\n      icon: React.createElement(Lottie, {\n        style: {\n          pointerEvents: 'none',\n          transform: 'translateX(20px)'\n        },\n        options: {\n          animationData: animDataHello,\n          rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n          }\n        },\n        width: this.viewportToPixels('65vw'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }),\n      action: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: () => {\n          this.go('panel2');\n        },\n        size: \"xl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"\\u041C\\u0443\\u0436\\u0441\\u043A\\u043E\\u0439\"), React.createElement(Button, {\n        onClick: () => {\n          this.go('panel2');\n        },\n        style: {\n          marginTop: '12px'\n        },\n        mode: \"secondary\",\n        size: \"xl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"\\u0416\\u0435\\u043D\\u0441\\u043A\\u0438\\u0439\")),\n      stretched: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442! \\u0414\\u0430\\u0432\\u0430\\u0439 \\u043E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0438\\u043C\\u0441\\u044F \\u0441 \\u043F\\u043E\\u043B\\u043E\\u043C:\")), React.createElement(Panel, {\n      id: \"panel2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Placeholder, {\n      icon: React.createElement(Lottie, {\n        style: {\n          pointerEvents: 'none'\n        },\n        options: {\n          animationData: animDataLove,\n          rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n          }\n        },\n        width: this.viewportToPixels('65vw'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }),\n      action: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: () => {\n          this.go('panel3');\n        },\n        size: \"xl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"\\u0414\\u0430\"), React.createElement(Button, {\n        onClick: () => {\n          this.go('panel4');\n        },\n        style: {\n          marginTop: '12px'\n        },\n        mode: \"secondary\",\n        size: \"xl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"\\u041D\\u0435\\u0442\")),\n      stretched: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"\\u0423 \\u0442\\u0435\\u0431\\u044F \\u043A\\u043E\\u0433\\u0434\\u0430-\\u043D\\u0438\\u0431\\u0443\\u0434\\u044C \\u0431\\u044B\\u043B\\u0438 \\u043E\\u0442\\u043D\\u043E\\u0448\\u0435\\u043D\\u0438\\u044F?\")), React.createElement(Panel, {\n      id: \"panel3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Placeholder, {\n      icon: React.createElement(Lottie, {\n        style: {\n          pointerEvents: 'none'\n        },\n        options: {\n          animationData: animDataBrokenHeart,\n          rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n          }\n        },\n        width: this.viewportToPixels('65vw'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }),\n      action: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: () => {\n          this.go('panel4');\n        },\n        size: \"xl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"\\u0412 \\u044D\\u0442\\u043E\\u043C \\u043C\\u0435\\u0441\\u044F\\u0446\\u0435\"), React.createElement(Button, {\n        onClick: () => {\n          this.go('panel4');\n        },\n        style: {\n          marginTop: '12px'\n        },\n        mode: \"secondary\",\n        size: \"xl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"\\u0411\\u043E\\u043B\\u044C\\u0448\\u0435 \\u043C\\u0435\\u0441\\u044F\\u0446\\u0430 \\u043D\\u0430\\u0437\\u0430\\u0434\")),\n      stretched: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u0433\\u0434\\u0430 \\u0437\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u043B\\u0438\\u0441\\u044C \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0435 \\u043E\\u0442\\u043D\\u043E\\u0448\\u0435\\u043D\\u0438\\u044F?\")), React.createElement(Panel, {\n      id: \"panel4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Placeholder, {\n      action: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Gallery, {\n        slideWidth: \"80%\",\n        align: \"center\",\n        style: {\n          height: 'auto',\n          maxHeight: '70vh'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          margin: '12px'\n        },\n        src: 'https://i.pinimg.com/originals/9d/9f/1d/9d9f1d16e1fd76a5d86ce4e936c16c92.png',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        style: {\n          margin: '12px'\n        },\n        src: 'https://i.pinimg.com/736x/c1/11/77/c11177827a34ce7c0ee3997cedbd7df8.jpg',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        style: {\n          margin: '12px'\n        },\n        src: 'https://mtdata.ru/u24/photo84B0/20862643202-0/original.jpg',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: () => {\n          this.go('panel5');\n        },\n        style: {\n          marginTop: '12px'\n        },\n        size: \"xl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C\")),\n      stretched: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"\\u041A\\u0430\\u043A\\u0443\\u044E \\u0438\\u0437 \\u044D\\u0442\\u0438\\u0445 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043E\\u043A \\u0442\\u044B \\u0432\\u044B\\u0431\\u0435\\u0440\\u0435\\u0448\\u044C?\")), React.createElement(Panel, {\n      id: \"panel5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(Placeholder, {\n      icon: React.createElement(Lottie, {\n        style: {\n          pointerEvents: 'none'\n        },\n        options: {\n          animationData: animDataHeart,\n          rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n          }\n        },\n        width: this.viewportToPixels('65vw'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }),\n      stretched: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Title, {\n      level: \"3\",\n      weight: \"semibold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"\\u0421\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u0438\\u0435 \\u043E\\u0442\\u043D\\u043E\\u0448\\u0435\\u043D\\u0438\\u044F \\u043D\\u0430\\u0447\\u043D\\u0443\\u0442\\u0441\\u044F \\u0443 \\u0442\\u0435\\u0431\\u044F 8 \\u043C\\u0430\\u0440\\u0442\\u0430 2021 \\u0433\\u043E\\u0434\\u0430, \\u043A\\u043E\\u0433\\u0434\\u0430 \\u0442\\u044B \\u043F\\u043E\\u0434\\u0430\\u0440\\u0438\\u0448\\u044C \\u0446\\u0432\\u0435\\u0442\\u044B \\u0441\\u0432\\u043E\\u0435\\u0439 \\u043E\\u0434\\u043D\\u043E\\u043A\\u043B\\u0430\\u0441\\u0441\\u043D\\u0438\\u0446\\u0435, \\u043E\\u043D\\u0430 \\u043D\\u0435 \\u0441\\u043C\\u043E\\u0436\\u0435\\u0442 \\u0443\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442\\u044C\\u0441\\u044F \\u0438 \\u043F\\u043E\\u0446\\u0435\\u043B\\u0443\\u0435\\u0442 \\u0442\\u0435\\u0431\\u044F\")), React.createElement(FixedLayout, {\n      vertical: \"bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(Div, {\n      style: {\n        marginBottom: '12px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(Button, {\n      before: React.createElement(Icon28StoryOutline, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }),\n      size: \"xl\",\n      mode: \"commerce\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0432 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438\")))));\n  }\n\n}\n\nexport default Tracker;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/TestMiniApp/src/LoveTest.js"],"names":["React","bridge","Panel","View","Placeholder","Button","Gallery","Title","FixedLayout","Div","Icon28StoryOutline","bg1","Lottie","animDataHello","animDataLove","animDataBrokenHeart","animDataHeart","Tracker","Component","constructor","props","back","state","popout","setState","window","history","pushState","pop","activePanel","length","send","status","componentDidMount","bind","go","addEventListener","e","preventDefault","subscribe","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","panel","push","sleep","ms","Promise","resolve","setTimeout","viewportToPixels","parts","match","q","Number","side","indexOf","render","pointerEvents","transform","animationData","rendererSettings","preserveAspectRatio","marginTop","height","maxHeight","margin","marginBottom"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './css/LoveTest.css';\r\n\r\nimport {Panel, View, Placeholder, Button, Gallery, Title, FixedLayout, Div} from '@vkontakte/vkui';\r\n\r\nimport Icon28StoryOutline from '@vkontakte/icons/dist/28/story_outline';\r\n\r\nimport bg1 from './img/bg1.jpg';\r\n\r\nimport Lottie from 'react-lottie';\r\nimport animDataHello from './animations/hello.json';\r\nimport animDataLove from './animations/love.json';\r\nimport animDataBrokenHeart from './animations/broken_heart.json';\r\nimport animDataHeart from './animations/heart.json';\r\n\r\nclass Tracker extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            popout: null,\r\n            history: [ 'main' ],\r\n            activePanel: 'main',\r\n        };\r\n\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.back = this.back.bind(this);\r\n        this.go = this.go.bind(this);\r\n    }\r\n\r\n    async componentDidMount () {\r\n        bridge.send('VKWebAppInit');\r\n\r\n        window.addEventListener('popstate', e => {\r\n            e.preventDefault();\r\n            this.back(e);\r\n        });\r\n\r\n        bridge.subscribe(async ({ detail: { type, data }}) => {\r\n            if (type !== undefined) console.log(type, data);\r\n            if (type === 'VKWebAppUpdateConfig') {\r\n                const schemeAttribute = document.createAttribute('scheme');\r\n                schemeAttribute.value = data.scheme ? data.scheme : 'bright_light';\r\n                document.body.attributes.setNamedItem(schemeAttribute);\r\n            }\r\n        });\r\n    }\r\n\r\n    back = () => {\r\n        if(this.state.popout !== null){\r\n            this.setState({ popout: null });\r\n            window.history.pushState({ pop: 'popout' }, 'Title');\r\n            return ;\r\n        }\r\n        let { activePanel, history } = this.state;\r\n        if(history.length === 1) {\r\n            bridge.send('VKWebAppClose', { status: 'success' });\r\n        } else if (history.length > 1) {\r\n            history.pop();\r\n            activePanel = history[history.length - 1];\r\n            this.setState({ activePanel, history });\r\n        }\r\n    };\r\n    go(panel) {\r\n        let { history, activePanel } = this.state;\r\n        if(history[history.length-1] !== panel) {\r\n            history.push(panel);\r\n            window.history.pushState({ activePanel: panel }, 'Title');\r\n            activePanel = panel;\r\n            this.setState({ activePanel, history });\r\n        }\r\n    }\r\n\r\n    sleep(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    viewportToPixels(value) {\r\n        let parts = value.match(/([0-9\\.]+)(vh|vw)/);\r\n        let q = Number(parts[1])\r\n        let side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]];\r\n        return side * (q/100)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View activePanel={this.state.activePanel} popout={this.state.popout} history={this.state.history} onSwipeBack={this.back}>\r\n                <Panel id='main'>\r\n                    <Placeholder\r\n                        icon={\r\n                            <Lottie style={{ pointerEvents: 'none', transform: 'translateX(20px)' }} options={{\r\n                                animationData: animDataHello,\r\n                                rendererSettings: {\r\n                                    preserveAspectRatio: 'xMidYMid slice'\r\n                                }\r\n                            }} width={this.viewportToPixels('65vw')}\r\n                            />\r\n                        }\r\n                        action={<div>\r\n                            <Button onClick={()=>{ this.go('panel2') }} size='xl'>Мужской</Button>\r\n                            <Button onClick={()=>{ this.go('panel2') }} style={{ marginTop: '12px' }} mode='secondary' size='xl'>Женский</Button>\r\n                        </div>}\r\n                        stretched\r\n                    >\r\n                        Привет! Давай определимся с полом:\r\n                    </Placeholder>\r\n                </Panel>\r\n                <Panel id='panel2'>\r\n                    <Placeholder\r\n                        icon={\r\n                            <Lottie style={{ pointerEvents: 'none' }} options={{\r\n                                animationData: animDataLove,\r\n                                rendererSettings: {\r\n                                    preserveAspectRatio: 'xMidYMid slice'\r\n                                }\r\n                            }} width={this.viewportToPixels('65vw')}\r\n                            />\r\n                        }\r\n                        action={<div>\r\n                            <Button onClick={()=>{ this.go('panel3') }} size='xl'>Да</Button>\r\n                            <Button onClick={()=>{ this.go('panel4') }} style={{ marginTop: '12px' }} mode='secondary' size='xl'>Нет</Button>\r\n                        </div>}\r\n                        stretched\r\n                    >\r\n                        У тебя когда-нибудь были отношения?\r\n                    </Placeholder>\r\n                </Panel>\r\n                <Panel id='panel3'>\r\n                    <Placeholder\r\n                        icon={\r\n                            <Lottie style={{ pointerEvents: 'none' }} options={{\r\n                                animationData: animDataBrokenHeart,\r\n                                rendererSettings: {\r\n                                    preserveAspectRatio: 'xMidYMid slice'\r\n                                }\r\n                            }} width={this.viewportToPixels('65vw')}\r\n                            />\r\n                        }\r\n                        action={<div>\r\n                            <Button onClick={()=>{ this.go('panel4') }} size='xl'>В этом месяце</Button>\r\n                            <Button onClick={()=>{ this.go('panel4') }} style={{ marginTop: '12px' }} mode='secondary' size='xl'>Больше месяца назад</Button>\r\n                        </div>}\r\n                        stretched\r\n                    >\r\n                        Когда закончились последние отношения?\r\n                    </Placeholder>\r\n                </Panel>\r\n                <Panel id='panel4'>\r\n                    <Placeholder\r\n                        action={<div>\r\n                            <Gallery\r\n                                slideWidth='80%'\r\n                                align='center'\r\n                                style={{ height: 'auto', maxHeight: '70vh' }}\r\n                            >\r\n                                <img style={{ margin: '12px' }} src={'https://i.pinimg.com/originals/9d/9f/1d/9d9f1d16e1fd76a5d86ce4e936c16c92.png'} />\r\n                                <img style={{ margin: '12px' }} src={'https://i.pinimg.com/736x/c1/11/77/c11177827a34ce7c0ee3997cedbd7df8.jpg'} />\r\n                                <img style={{ margin: '12px' }} src={'https://mtdata.ru/u24/photo84B0/20862643202-0/original.jpg'} />\r\n                            </Gallery>\r\n                            <Button onClick={()=>{ this.go('panel5') }} style={{ marginTop: '12px' }} size='xl'>Выбрать</Button>\r\n                        </div>}\r\n                        stretched\r\n                    >\r\n                        Какую из этих картинок ты выберешь?\r\n                    </Placeholder>\r\n                </Panel>\r\n                <Panel id='panel5'>\r\n                    <Placeholder\r\n                        icon={\r\n                            <Lottie style={{ pointerEvents: 'none' }} options={{\r\n                                animationData: animDataHeart,\r\n                                rendererSettings: {\r\n                                    preserveAspectRatio: 'xMidYMid slice'\r\n                                }\r\n                            }} width={this.viewportToPixels('65vw')}\r\n                            />\r\n                        }\r\n                        stretched\r\n                    >\r\n                        <Title level='3' weight='semibold'>Следующие отношения начнутся у тебя 8 марта 2021 года, когда ты подаришь цветы своей однокласснице, она не сможет удержаться и поцелует тебя</Title>\r\n                    </Placeholder>\r\n                    <FixedLayout vertical='bottom'>\r\n                        <Div style={{ marginBottom: '12px' }}>\r\n                            <Button before={<Icon28StoryOutline />} size='xl' mode='commerce'>Поделиться в истории</Button>\r\n                        </Div>\r\n                    </FixedLayout>\r\n                </Panel>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Tracker;"]},"metadata":{},"sourceType":"module"}